var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(a){return a instanceof e?a:new e(function(b,c){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var d=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){d(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var c=a[b];a[b]=null;try{c()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var e=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(k){b.reject(k)}};e.prototype.createResolveAndReject_=
function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};e.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof e)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};e.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(k){this.reject_(k);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};e.prototype.reject_=function(a){this.settle_(2,a)};e.prototype.fulfill_=function(a){this.settle_(1,a)};e.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
0;a<this.onSettledCallbacks_.length;++a)f.asyncExecute(this.onSettledCallbacks_[a]);this.onSettledCallbacks_=null}};var f=new b;e.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};e.prototype.settleSameAsThenable_=function(a,b){var c=this.createResolveAndReject_();try{a.call(b,c.resolve,c.reject)}catch(l){c.reject(l)}};e.prototype.then=function(a,b){function c(a,b){return"function"==typeof a?function(b){try{d(a(b))}catch(q){f(q)}}:
b}var d,f,g=new e(function(a,b){d=a;f=b});this.callWhenSettled_(c(a,d),c(b,f));return g};e.prototype.catch=function(a){return this.then(void 0,a)};e.prototype.callWhenSettled_=function(a,b){function c(){switch(d.state_){case 1:a(d.result_);break;case 2:b(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?f.asyncExecute(c):this.onSettledCallbacks_.push(c)};e.resolve=c;e.reject=function(a){return new e(function(b,c){c(a)})};e.race=function(a){return new e(function(b,
d){for(var e=$jscomp.makeIterator(a),k=e.next();!k.done;k=e.next())c(k.value).callWhenSettled_(b,d)})};e.all=function(a){var b=$jscomp.makeIterator(a),d=b.next();return d.done?c([]):new e(function(a,e){function k(b){return function(c){f[b]=c;l--;0==l&&a(f)}}var f=[],l=0;do f.push(void 0),l++,c(d.value).callWhenSettled_(k(f.length-1),e),d=b.next();while(!d.done)})};return e},"es6","es3");$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var c=a.next();$jscomp.generator.ensureIteratorResultIsObject_(c);if(c.done)this.yieldResult=c.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(c.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var d=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(d);if(!d.done)return this.context_.stop_(),d;var e=d.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,e);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function c(b){return a.throw(b)}return new Promise(function(d,e){function f(a){a.done?d(a.value):Promise.resolve(a.value).then(b,c).then(f,e)}f(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var e=b.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var f=b[c];if(f===a||Object.is(f,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6","es3");
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},b=Object.create(new $jscomp.global.Proxy(a,{get:function(c,d,e){return c==a&&"q"==d&&e==b}}));return!0===b.q}catch(c){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.polyfill("WeakMap",function(a){function b(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==d.get(c)}catch(r){return!1}}function c(a){$jscomp.owns(a,e)||$jscomp.defineProperty(a,e,{value:{}})}function d(a){var b=Object[a];b&&(Object[a]=function(a){c(a);return b(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;
var e="$jscomp_hidden_"+Math.random();d("freeze");d("preventExtensions");d("seal");var f=0,g=function(a){this.id_=(f+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};g.prototype.set=function(a,b){c(a);if(!$jscomp.owns(a,e))throw Error("WeakMap key fail: "+a);a[e][this.id_]=b;return this};g.prototype.get=function(a){return $jscomp.owns(a,e)?a[e][this.id_]:void 0};g.prototype.has=
function(a){return $jscomp.owns(a,e)&&$jscomp.owns(a[e],this.id_)};g.prototype.delete=function(a){return $jscomp.owns(a,e)&&$jscomp.owns(a[e],this.id_)?delete a[e][this.id_]:!1};return g},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!d.next().done?!1:!0}catch(t){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();var c=new WeakMap,d=function(a){this.data_={};this.head_=g();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};d.prototype.set=function(a,b){a=0===a?0:a;var c=e(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=b:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,
key:a,value:b},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};d.prototype.delete=function(a){a=e(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=g();this.size=0};d.prototype.has=function(a){return!!e(this,a).entry};
d.prototype.get=function(a){return(a=e(this,a).entry)&&a.value};d.prototype.entries=function(){return f(this,function(a){return[a.key,a.value]})};d.prototype.keys=function(){return f(this,function(a){return a.key})};d.prototype.values=function(){return f(this,function(a){return a.value})};d.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var e=function(a,b){var d=b&&typeof b;"object"==
d||"function"==d?c.has(b)?d=c.get(b):(d=""+ ++n,c.set(b,d)):d="p_"+b;var e=a.data_[d];if(e&&$jscomp.owns(a.data_,d))for(a=0;a<e.length;a++){var f=e[a];if(b!==b&&f.key!==f.key||b===f.key)return{id:d,list:e,index:a,entry:f}}return{id:d,list:e,index:-1,entry:void 0}},f=function(a,b){var c=a.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})},g=function(){var a={};return a.previous=
a.next=a.head=a},n=0;return d},"es6","es3");
$jscomp.polyfill("Set",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a($jscomp.makeIterator([b]));if(!c.has(b)||1!=c.size||c.add(b)!=c||1!=c.size||c.add({x:4})!=c||2!=c.size)return!1;var f=c.entries(),g=f.next();if(g.done||g.value[0]!=b||g.value[1]!=b)return!1;g=f.next();return g.done||g.value[0]==b||4!=g.value[0].x||g.value[1]!=g.value[0]?!1:f.next().done}catch(n){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();var c=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.map_.size};c.prototype.add=function(a){a=0===a?0:a;this.map_.set(a,a);this.size=this.map_.size;return this};c.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};c.prototype.clear=
function(){this.map_.clear();this.size=0};c.prototype.has=function(a){return this.map_.has(a)};c.prototype.entries=function(){return this.map_.entries()};c.prototype.values=function(){return this.map_.values()};c.prototype.keys=c.prototype.values;c.prototype[Symbol.iterator]=c.prototype.values;c.prototype.forEach=function(a,b){var c=this;this.map_.forEach(function(d){return a.call(b,d,d,c)})};return c},"es6","es3");
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)$jscomp.owns(d,e)&&(a[e]=d[e])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");var MIN_AUTOSAVE_INTERVAL=2E3;
function AutoSave(a,b){this.plan=a;this.code=b;this.intervalID=null;this.enableSaving=function(){null===this.intervalID&&(this.intervalID=setInterval(this.save.bind(this),MIN_AUTOSAVE_INTERVAL))};this.disableSaving=function(){clearInterval(this.intervalID);this.intervalID=null};this.save=function(){if(this.plan.changesMade){loggedIn&&this.code&&$.ajax({url:"accounts/degree_plan_view",method:"PUT",data:{mode:"PLAN",code:this.code,plan:this.plan.serializeSimple()},dataType:"json",contentType:"application/json",
success:function(a){console.log("Degree plan saved to user profile.")}});if(this.code)$.ajax({url:"degree/stored_plans",method:"PUT",data:{code:this.code,plan:this.plan.serialize()},dataType:"json",contentType:"application/json"});else{var a=this;$.ajax({url:"degree/stored_plans",method:"POST",data:{plan:this.plan.serialize()},dataType:"json",contentType:"application/json",success:function(b){console.log("store success, code = "+b.response);b.response&&(a.code=b.response);CS.setCode(b.response);save_code=
b.response}})}this.plan.changesMade=!1}}}function Course(a,b){this.code=a;this.sessions=b||[];this.addSession=function(a){this.sessions.includes(a)||this.sessions.push(a)}}
function CourseOffering(a,b,c,d,e,f,g){this.code=a;this.year=b;this.title=c;this.units=d;this.rules=e;this.extras=f;this.repeatable=void 0===g?!1:g;"number"===typeof d?this.units=d:void 0===d?this.units=6:(a=this.units.split(" to "),this.units=parseInt(a[0]),this.maxUnits=parseInt(a[1]));this.checkRequirements=function(a,b){for(var c=[],d=!0,e=[],f=$jscomp.makeIterator(a.sessions),h=f.next();!h.done;h=f.next())h=h.value,sessionIsAfter(h,b)||h===b||Array.prototype.push.apply(e,a.courses[h]);a=a.courses[b]||
[];b=$jscomp.makeIterator(this.rules);for(h=b.next();!h.done;h=b.next()){f=!1;h=$jscomp.makeIterator(h.value);for(var g=h.next();!g.done;g=h.next())g=g.value,!f&&/^~?[A-Z]{4}[0-9]{4}/.test(g)&&("~"===g.charAt(0)?(g=g.slice(1),checkCoursePresent(e.concat(a),g)?c.push(g):f=!0):f=checkCoursePresent(e,g));d=d&&f}return{sat:d,inc:c}}}
function CourseEnrolment(a,b){this.code=a.code;this.course=a;this.session=b;this.failed=!1;this.notes=this.grade=null;this.markFailed=function(a){this.failed=void 0===a?!0:a};this.setGrade=function(a){this.grade=a};this.clearGrade=function(){this.grade=null};this.setNotes=function(a){this.notes=a};this.clearNotes=function(){this.notes=null}}function checkCoursePresent(a,b){a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())if(c=c.value,c.code===b&&!c.failed)return!0;return!1}
var KNOWN_COURSES={},KNOWN_MMS={},KNOWN_DEGREES={},KNOWN_COURSE_LISTS={},COURSE_REQUESTS={};
function getCourseOffering(a,b){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress){a in KNOWN_COURSES||(KNOWN_COURSES[a]={});if(b in KNOWN_COURSES[a])return d.jumpTo(2);if(a in COURSE_REQUESTS)return d.yield(COURSE_REQUESTS[a],2);c=$.ajax({url:"degree/coursedata",data:{codes:'["'+a+'"]'},success:function(b){recordCourseOfferings(a,b.response[a].versions)}});a in COURSE_REQUESTS||(COURSE_REQUESTS[a]={});COURSE_REQUESTS[a][b]=c;return d.yield(c,5)}return 2!=d.nextAddress?
(console.log(),d.jumpTo(2)):d.return(KNOWN_COURSES[a][closestYear(b,Object.keys(KNOWN_COURSES[a]))])})}
function batchCourseOfferingActions(a){var b,c,d,e,f,g,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){if($.isEmptyObject(a))return k.return();b=[];for(c in a)d=c.split("-")[0],d in KNOWN_COURSES||b.push(d);e=$.ajax({url:"degree/coursedata",data:{codes:JSON.stringify(b)},success:function(b){console.log();for(var c in b.response)b.response.hasOwnProperty(c)&&recordCourseOfferings(c,b.response[c].versions);for(var d in a)if(b=d.split("-")[0],b in KNOWN_COURSES&&
!$.isEmptyObject(KNOWN_COURSES[b])){c=closestYear(d.split("-")[1]||THIS_YEAR,Object.keys(KNOWN_COURSES[b]));for(var e=$jscomp.makeIterator(a[d]),f=e.next();!f.done;f=e.next())f=f.value,f(KNOWN_COURSES[b][c])}}});f=$jscomp.makeIterator(b);for(g=f.next();!g.done;g=f.next())n=g.value,COURSE_REQUESTS[n]=e;return k.yield(e,2)}return 3!=k.nextAddress?k.yield(e,3):k.return(k.yieldResult)})}
function getMMSOffering(a,b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?(a in KNOWN_MMS||(KNOWN_MMS[a]={}),b in KNOWN_MMS[a]?c.jumpTo(2):c.yield($.ajax({url:"search/mms",data:{query:a},success:function(b){recordMMSOfferings(a,b.versions)}}),2)):c.return(KNOWN_MMS[a][closestYear(b,Object.keys(KNOWN_MMS[a]))])})}
function batchMMSData(a){var b,c,d,e,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){b={};for(c in a){b.mms=c;if(a.hasOwnProperty(b.mms))if(b.code=b.mms.split("/")[0],b.year=b.mms.split("/")[1],b.code in KNOWN_COURSES)for(d=$jscomp.makeIterator(a[b.mms]),e=d.next();!e.done;e=d.next())f=e.value,f(KNOWN_MMS[b.code][closestYear(b.year,Object.keys(KNOWN_MMS[b.code]))]);else $.ajax({url:"search/mms",data:{query:b.code},success:function(b){return function(c){recordMMSOfferings(b.code,c.versions);
c=$jscomp.makeIterator(a[b.mms]);for(var d=c.next();!d.done;d=c.next())d=d.value,d(KNOWN_MMS[b.code][closestYear(b.year,Object.keys(KNOWN_MMS[b.code]))])}}(b)});b={code:b.code,mms:b.mms,year:b.year}}g.jumpToEnd()})}
function getDegreeOffering(a,b){var c,d,e,f,g,n,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:a in KNOWN_DEGREES||(KNOWN_DEGREES[a]={});if(b in KNOWN_DEGREES[a]){l.jumpTo(2);break}l.setCatchFinallyBlocks(3);return l.yield($.ajax({url:"degree/degreereqs",data:{query:a+"-"+b},success:function(c){a in KNOWN_DEGREES||(KNOWN_DEGREES[a]={});KNOWN_DEGREES[a][b]=new Degree(a,b,c.name,c.units,c.required)}}),5);case 5:l.leaveTryBlock(4);break;case 3:return l.enterCatchBlock(),
console.log("Failed to retrieve degree program requirements for "+a+"-"+b),console.log("Attempting to get 2018 requirements."),l.setCatchFinallyBlocks(6),l.yield($.ajax({url:"degree/degreereqs",data:{query:a},success:function(c){a in KNOWN_DEGREES||(KNOWN_DEGREES[a]={});KNOWN_DEGREES[a][b]=new Degree(a,THIS_YEAR,c.name,c.units,c.required)}}),8);case 8:l.leaveTryBlock(4);break;case 6:l.enterCatchBlock(),c=a===degree_code?degree_name:degree_name2,KNOWN_DEGREES[a][b]=new Degree(a,b,c,144,{}),console.log("Failed to retrieve degree program requirements for "+
a),console.log("Creating generic degree");case 4:return l.setCatchFinallyBlocks(9),l.yield($.ajax({url:"degree/degreeplan",data:{degree_code:a,year:b}}),11);case 11:d=l.yieldResult;l.leaveTryBlock(10);break;case 9:l.enterCatchBlock(),d={response:[]};case 10:e={};f=b+"S1";g=$jscomp.makeIterator(d.response);for(n=g.next();!n.done;n=g.next())k=n.value,e[f]=k,f=nextSession(f,3);KNOWN_DEGREES[a][b].suggestedPlan=e;case 2:return l.return(KNOWN_DEGREES[a][b])}})}
function getCourseList(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?a in KNOWN_COURSE_LISTS?b.return(KNOWN_COURSE_LISTS[a]):b.yield($.ajax({url:"search/courselists",data:{query:a},success:function(b){KNOWN_COURSE_LISTS[a]=b.response.courses}}),2):b.return(KNOWN_COURSE_LISTS[a])})}
function preparePlanForUpload(a){sessions=[];for(var b=$jscomp.makeIterator(a.sessions),c=b.next();!c.done;c=b.next()){c=c.value;var d={};to_add=(d[c]=[],d);d=$jscomp.makeIterator(a.courses[c]);for(var e=d.next();!e.done;e=d.next())e=e.value,to_add[c].push({code:e.code,title:e.course.title});sessions.push(to_add)}return sessions}
function recordCourseOfferings(a,b){for(var c in b){var d=b[c];"sessions"===Object.keys(d)[0]&&1===Object.keys(d).length&&(d=b[c-1],d.sessions=b[c].sessions);a in KNOWN_COURSES||(KNOWN_COURSES[a]={});KNOWN_COURSES[a][c]=new CourseOffering(a,c,d.title,d.units,d.prerequisites||[],{description:d.description,prerequisite_text:d.prerequisite_text,sessions:d.sessions||[],majors:d.majors||[],minors:d.minors||[],areas_of_interest:d.areas_of_interest,convener:d.convener,learning_outcomes:d.learning_outcomes},
d.repeatable||!1)}}function recordMMSOfferings(a,b){for(var c in b){var d=b[c];a in KNOWN_MMS||(KNOWN_MMS[a]={});KNOWN_MMS[a][c]=new MMS(a,c,d.title,d.requirements,{description:d.description,learning_outcomes:d.learning_outcomes})}}
function closestYear(a,b){b=void 0===b?[]:b;if(b.includes(a))return a;var c=Math.max.apply(Math,$jscomp.arrayFromIterable(b)),d=Math.min.apply(Math,$jscomp.arrayFromIterable(b));if(a>=c)return c;if(a<=d)return d;for(var e=1;e<=Math.max(c-a,a-d);e++){if(a+e in b)return a+e;if(a-e in b)return a-e}return THIS_YEAR}
function Degree(a,b,c,d,e,f){f=void 0===f?{}:f;this.code=a;this.year=b;this.title=c;this.units=d;this.rules=e;this.suggestedPlan=f;this.identifier=a+"-"+b;this.incorporateCourseLists=function(){var a=this,b,c,d,e,f,t,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){switch(g.nextAddress){case 1:c=g.forIn(a.rules);case 2:if(null==(b=c.getNext())){g.jumpTo(0);break}if("x_from_here"!==b){g.jumpTo(2);break}d=$jscomp.makeIterator(a.rules[b]);e=d.next();case 6:if(e.done){g.jumpTo(2);break}f=
e.value;console.log();if("string"!==typeof f.courses){g.jumpTo(7);break}t=f.courses;h=f;return g.yield(getCourseList(t),10);case 10:h.courses=g.yieldResult,f.listName=t;case 7:e=d.next(),g.jumpTo(6)}})};this.incorporateCourseLists();this.checkRequirements=function(a){var b=!0,c=0,d=[],e=this.rules,f;for(f in e)if(e.hasOwnProperty(f))if(["compulsory_courses","one_from_here","x_from_here"].includes(f))for(var g=$jscomp.makeIterator("compulsory_courses"===f?[e[f]]:e[f]),h=g.next();!h.done;h=g.next()){h=
h.value;var m=matchInDegree(a,new Set("x_from_here"===f?h.courses:h)),q=m.map(function(a){return a.course.units}).reduce(function(a,b){return a+b},0),u=m.map(function(a){return a.code}),w=!0;"compulsory_courses"===f&&(w=m.length===h.length);"one_from_here"===f&&(w=1<=m.length);"x_from_here"===f&&(w=q>=(h.num||h.units));b=b&&w;d.push({type:f,sat:w,units:q,codes:u})}else if(["x_from_category","max_by_level"].includes(f))for(var v in e[f])g=e[f][v],m=[],q=[],h=0,m=g.area||[],q=g.level||[],h=g.units,
q=matchCategoryInDegree(a,m,q),m=q.map(function(a){return a.course.units}).reduce(function(a,b){return a+b},0),q=q.map(function(a){return a.code}),u=!0,"minimum"===g.type&&(u=m>=h),"maximum"===g.type&&(u=m<=h),"min_max"===g.type&&(u=m>=h.minimum&&m<=h.maximum),b=b&&u,d.push({type:f,sat:u,units:m,codes:q});else if(["required_m/m/s","one_from_m/m/s"].includes(f))for(g=e[f],"required_m/m/s"===f&&(g=[e[f]]),g=$jscomp.makeIterator(g),h=g.next();!h.done;h=g.next()){u=h.value;h=[];m=[];q=0;w=$jscomp.makeIterator(a.trackedMMS);
for(var B=w.next();!B.done;B=w.next())if(B=B.value,u.includes(B.code)){h.push(B.code);var E=B.checkRequirements(a);E.sat&&(m.push(B.code),q=Math.max(q,E.units))}u=0<m.length;b=b&&u;d.push({type:f,sat:u,units:q,codes:h,completed:m})}e=$jscomp.makeIterator(a.sessions);for(f=e.next();!f.done;f=e.next())for(f=$jscomp.makeIterator(a.courses[f.value]),v=f.next();!v.done;v=f.next())v=v.value,v.failed||(c+=v.course.units);b=b&&c>=this.units;return{sat:b,units:c,rule_details:d}}}
function matchInDegree(a,b){for(var c=[],d=$jscomp.makeIterator(a.sessions),e=d.next();!e.done;e=d.next()){e=$jscomp.makeIterator(a.courses[e.value]);for(var f=e.next();!f.done;f=e.next())f=f.value,!f.failed&&b.delete(f.code)&&c.push(f)}return c}
function matchCategoryInDegree(a,b,c){for(var d=[],e=$jscomp.makeIterator(a.sessions),f=e.next();!f.done;f=e.next()){f=$jscomp.makeIterator(a.courses[f.value]);for(var g=f.next();!g.done;g=f.next()){g=g.value;var n=!0;b&&0<b.length&&(n=n&&b.includes(g.code.slice(0,4)));if(c&&0<c.length){var k=g.code.charAt(4)+"000";n=n&&(c.includes(k)||c.includes(parseInt(k)))}n&&!g.failed&&d.push(g)}}return d}
function MMS(a,b,c,d,e){this.code=a;this.year=b;this.title=c;this.rules=d;this.extras=e;this.identifier=a+"-"+b;this.type=a.split("-")[1];this.units=MMS_TYPE_UNITS[this.type];this.checkRequirements=function(a){var b=!0,c=0,d=[],e=this.rules,f;for(f in e)if(e.hasOwnProperty(f))if(["compulsory_courses","one_from_here","x_from_here"].includes(f))for(var p=$jscomp.makeIterator("compulsory_courses"===f?[e[f]]:e[f]),t=p.next();!t.done;t=p.next()){t=t.value;var h=matchInDegree(a,new Set(("x_from_here"===
f?t.courses:t).map(function(a){return a[0].code}))),m=h.map(function(a){return a.course.units}).reduce(function(a,b){return a+b},0),q=h.map(function(a){return a.code}),u=!0;"compulsory_courses"===f&&(u=h.length===t.length);"one_from_here"===f&&(u=1<=h.length);"x_from_here"===f&&"maximum"!==t.type&&(u=m>=(t.num||t.units));c+="maximum"===t.type?Math.min(m,t.units):m;b=b&&u;d.push({type:f,sat:u,units:m,codes:q})}else if(["x_from_category","max_by_level"].includes(f))for(var w in e[f])p=e[f][w],h=[],
m=[],t=0,h=p.area||[],m=p.level||[],t=p.units,m=matchCategoryInDegree(a,h,m),h=m.map(function(a){return a.course.units}).reduce(function(a,b){return a+b},0),m=m.map(function(a){return a.code}),q=!0,"minimum"===p.type&&(q=h>=t),"maximum"===p.type&&(q=h<=t),"min_max"===p.type&&(q=h>=t.minimum&&h<=t.maximum),c+=h,b=b&&q,d.push({type:f,sat:q,units:h,codes:m});else if(f==="required_m/m/s".includes(f)){m=e[f];p=[];t=[];h=0;q=$jscomp.makeIterator(a.trackedMMS);for(u=q.next();!u.done;u=q.next())if(u=u.value,
m.includes(u.code)){p.push(u.code);var v=u.checkRequirements(a);v.sat&&(t.push(u.code),h=Math.max(h,v.units))}m=0<t.length;b=b&&m;d.push({type:f,sat:m,units:h,codes:p,completed:t})}b=b&&c>=this.units;return{sat:b,units:c,rule_details:d}}}function matchInDegree(a,b){for(var c=[],d=$jscomp.makeIterator(a.sessions),e=d.next();!e.done;e=d.next()){e=e.value;e=a.courses[e];e=$jscomp.makeIterator(e);for(var f=e.next();!f.done;f=e.next())f=f.value,!f.failed&&b.delete(f.code)&&c.push(f)}return c}
var MMS_TYPE_UNITS={MAJ:48,MIN:24,SPEC:24,HSPC:48},MMS_TYPE_PRINT={MAJ:"Major",MIN:"Minor",SPEC:"Specialisation",HSPC:"Honours Specialisation"};
function Plan(){this.degrees=[];this.sessions=[];this.courses={};this.trackedMMS=[];this.warnings=[];this.changesMade=!1;this.unsatisfiedCourses=function(){for(var a=[],b=$jscomp.makeIterator(this.sessions),c=b.next();!c.done;c=b.next()){c=$jscomp.makeIterator(this.courses[c.value]);for(var d=c.next();!d.done;d=c.next())if(d=d.value,d.failed){var e=d.course.checkRequirements(this,d.session);e.sat||a.push({course:d,inc:e.inc})}}return a};this.countCourseLoads=function(){var a={};if(!this.sessions)return a;
for(var b=$jscomp.makeIterator(this.sessions),c=b.next();!c.done;c=b.next()){var d=c.value;c=this.sessions[0].slice(0,4)+SESSION_HALF_YEARS[this.sessions[0].slice(4)];d=$jscomp.makeIterator(this.courses[d]);for(var e=d.next();!e.done;e=d.next())e=e.value,e.failed||(a[c]=(a[c]||0)+e.course.units)}return a};this.checkOverload=function(a,b){for(var c=0,d=0,e=0,f=0,g=0,n=0,k=0;k<this.sessions.indexOf(a);k++){currentSession=this.sessions[k];for(var l=0,r=$jscomp.makeIterator(currentSession),p=r.next();!p.done;p=
r.next())p=p.value,null!==p.grade&&(e++,f+=p,k===this.sessions.indexOf(a)-1&&(g++,n+=p)),p.failed||(c+=p.course.units,l+=p.course.units);d=Math.max(d,l)}a=f/e;g=n/g;b=OVERLOAD_RULES[b];return{sat:c>=b.units&&d>=b.oneSessionUnits&&a>=b.overallMark&&g>=b.lastSessionMark,priorUnits:c,maxSessionUnits:d,gradeAverage:a,previousSessionGradeAverage:g}};this.addDegree=function(a,b){var c=this,d,e,f,g,n,k,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){d=$jscomp.makeIterator(c.degrees);
for(e=d.next();!e.done;e=d.next())if(f=e.value,f.code===a)return r.return();return r.yield(getDegreeOffering(a,b),2)}g=r.yieldResult;n=Object.assign({},g);c.degrees.push(n);if(1===c.degrees.length)return r.return(n);k=$jscomp.makeIterator(c.degrees);for(e=k.next();!e.done;e=k.next())l=e.value,l.units-=48;c.changesMade=!0;return r.return(n)})};this.getDegree=function(a,b){b=$jscomp.makeIterator(this.degrees);for(var c=b.next();!c.done;c=b.next())if(c=c.value,c.code===a)return c};this.removeDegree=
function(a){for(var b=0;b<degrees.size;b++)if(this.degrees[b].code===a)return this.degrees.splice(b,1),this.degrees[0].units+=48,this.changesMade=!0;return!1};this.addSession=function(a){if(a in this.sessions)return!1;this.changesMade=!0;for(var b=0;b<this.sessions.length;b++)if(!sessionIsAfter(a,this.sessions[b]))return this.sessions.splice(b,0,a),this.courses[a]=[],!0;this.sessions.push(a);this.courses[a]=[];return!0};this.removeSession=function(a){var b=this.sessions.indexOf(a);if(-1!==b)return this.sessions.splice(b,
1),deletedCourses=this.courses[a],delete this.courses[a],this.changesMade=!0,deletedCourses};this.addCourse=function(a,b){var c=this,d,e,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress){if(!c.sessions.includes(a))return g.return(!1);d=a.slice(0,4);return g.yield(getCourseOffering(b,d),2)}e=g.yieldResult;f=new CourseEnrolment(e,a);c.courses[a].push(f);c.changesMade=!0;return g.return(!0)})};this.removeCourse=function(a,b){if(!this.sessions.includes(a))return!1;
courses=this.courses[a];for(var c in courses)if(courses[c].code===b)return courses.splice(c,1),this.changesMade=!0;return!1};this.getCourses=function(a){for(var b=[],c=$jscomp.makeIterator(this.sessions),d=c.next();!d.done;d=c.next()){d=$jscomp.makeIterator(this.courses[d.value]);for(var e=d.next();!e.done;e=d.next())e=e.value,e.code===a&&b.push(e)}return b};this.clearAllCourses=function(){for(var a=$jscomp.makeIterator(this.sessions),b=a.next();!b.done;b=a.next())session=b.value,this.courses[session]=
[];this.changesMade=!0};this.addMMS=function(a,b){var c=this,d,e,f,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){d=$jscomp.makeIterator(c.trackedMMS);for(e=d.next();!e.done;e=d.next())if(f=e.value,f.code===a)return n.return(!1);return n.yield(getMMSOffering(a,b),2)}g=n.yieldResult;c.trackedMMS.unshift(g);c.changesMade=!0;return n.return(!0)})};this.removeMMS=function(a,b){for(var c in this.trackedMMS){var d=this.trackedMMS[c];if(d.code===a&&d.year===b)return this.trackedMMS.splice(c,
1),this.changesMade=!0}return!1};this.trackingMMS=function(a,b){b=void 0===b?null:b;for(var c=$jscomp.makeIterator(this.trackedMMS),d=c.next();!d.done;d=c.next())if(d=d.value,d.code===a&&(null===b||d.year===b))return!0;return!1};this.addWarning=function(a,b,c){this.changesMade=!0;this.warnings.push(new Warning(a,b,c))};this.removeWarning=function(a,b){for(var c=$jscomp.makeIterator(this.warnings),d=c.next();!d.done;d=c.next())if(d=d.value,d.type===a&&d.text===b)return this.warnings.splice(this.warnings.indexOf(d),
1),this.changesMade=!0,d};this.getWarning=function(a,b){for(var c=$jscomp.makeIterator(this.warnings),d=c.next();!d.done;d=c.next())if(d=d.value,d.type===a&&d.text===b)return d};this.getNextSession=function(){return nextSession(this.sessions[this.sessions.length-1])};this.clearWarnings=function(){this.changesMade=!0;this.warnings=[]};this.serializeSimple=function(){var a=new Date;a={degrees:[],trackedMMS:[],created:a.getDate()+"/"+a.getMonth()+"/"+a.getFullYear(),startYear:Infinity,name:""};for(var b=
$jscomp.makeIterator(this.degrees),c=b.next();!c.done;c=b.next())c=c.value,c.year<a.startYear&&(a.startYear=c.year),a.degrees.push(c.code);b=$jscomp.makeIterator(this.trackedMMS);for(c=b.next();!c.done;c=b.next())c=c.value,a.trackedMMS.push({code:c.code,year:c.year});this.startSem&&(a.startSem=this.startSem);return JSON.stringify(a)};this.serialize=function(){for(var a={degrees:[],sessions:this.sessions,courses:{},trackedMMS:[],warnings:[]},b=$jscomp.makeIterator(this.degrees),c=b.next();!c.done;c=
b.next())c=c.value,a.degrees.push({code:c.code,year:c.year});for(var d in this.courses)if(this.courses.hasOwnProperty(d))for(a.courses[d]=[],b=$jscomp.makeIterator(this.courses[d]),c=b.next();!c.done;c=b.next()){c=c.value;var e=Object.assign({},c);e.course={code:c.course.code,year:c.course.year};a.courses[d].push(e)}d=$jscomp.makeIterator(this.trackedMMS);for(b=d.next();!b.done;b=d.next())b=b.value,a.trackedMMS.push({code:b.code,year:b.year});d=$jscomp.makeIterator(this.warnings);for(b=d.next();!b.done;b=
d.next()){c=b.value;b={type:c.type,text:c.text,actions:[]};c=$jscomp.makeIterator(c.actions);for(e=c.next();!e.done;e=c.next())e=e.value,e.toString().includes("boxShadow: '0 0 25px #007bff'")&&(e=e.target,b.actions.push({type:"scroll-and-glow",session:e.siblings().find(".row-ses").text(),code:e.find(".course-code").text()}));a.warnings.push(b)}this.startSem&&(a.startSem=this.startSem);return JSON.stringify(a)}}
var SESSION_ORDER="Su S1 Au Wi S2 Sp".split(" "),SESSION_HALF_YEARS={Su:"First",S1:"First",Au:"First",Wi:"Second",S2:"Second",Sp:"Second"};function sessionIsAfter(a,b){return a.slice(0,4)>b.slice(0,4)?!0:a.slice(0,4)<b.slice(0,4)?!1:SESSION_ORDER.indexOf(a.slice(4))>SESSION_ORDER.indexOf(b.slice(4))}
function nextSession(a,b){b=void 0===b?1:b;var c=a.slice(0,4),d=a.slice(4);for(a=0;a<b;a++)d=SESSION_ORDER.indexOf(d),d===SESSION_ORDER.length-1?(c++,d=SESSION_ORDER[0]):d=SESSION_ORDER[d+1];return c+d}var OVERLOAD_RULES={30:{totalUnits:48,oneSessionUnits:24,overallMark:60,lastSessionMark:60},36:{totalUnits:96,oneSessionUnits:30,overallMark:70,lastSessionMark:70}};function NoSession(a){this.name="NoSession";this.message=a||""}NoSession.prototype=Error.prototype;
function NonExistentMMS(a){this.name="NonExistentMMS";this.message=a||""}NonExistentMMS.prototype=Error.prototype;function Warning(a,b,c){c=void 0===c?[]:c;this.type=a;this.text=b;this.actions=c;this.runActions=function(){for(var a=$jscomp.makeIterator(this.actions),b=a.next();!b.done;b=a.next())b=b.value,b()}}
function Search(a){this.plan=a;this.requests={course:null,major:null,minor:null,spec:null};this.filters=[];this.courseSearch=function(a,c,d){var b=this.plan;null!==this.requests.course&&this.requests.course.abort();for(var f=this.filters,g={codes:[],levels:[],sessions:[]},n=$jscomp.makeIterator(f),k=n.next();!k.done;k=n.next())k=k.value,"level"===k.type?g.levels.push(k.data):"code"===k.type?g.codes.push(k.data):(k={year:k.data.slice(0,4),semester:SESSION_WORDS[k.data.slice(4)]},sem&&!g.semesters.includes(sem)&&
g.semesters.push(k));this.requests.course=$.ajax({url:"search/coursesearch",data:{query:a,filters:JSON.stringify(g)},type:"GET",dataType:"json",contentType:"application/json",beforeSend:c,success:function(a){for(var c=[],e=[],g=$jscomp.makeIterator(f),h=g.next();!h.done;h=g.next())h=h.value,"session"===h.type&&e.push(h.data);if(e.length){g={};h={};a=$jscomp.makeIterator(a.response);for(var k=a.next();!k.done;h={course:h.course},k=a.next())h.course=k.value,k=h.course.code,k in g||(g[k+"-"+THIS_YEAR]=
[]),g[k+"-"+THIS_YEAR].push(function(a){return function(d){for(var f=!e.length,g=$jscomp.makeIterator(e),h=g.next();!h.done;h=g.next()){var k=h.value;h=d.checkRequirements(b,k).sat;k=d.extras.sessions.includes(SESSION_WORDS[k.slice(4)]);f=f||h&&k}f&&c.push(a.course)}}(h));batchCourseOfferingActions(g).then(function(){d(c)})}else d(a.response)},error:console.log("Course search aborted or failed. "),complete:console.log("Course search initiated. ")})};this.mmsSearch=function(a,c,d){for(var b in this.requests)"course"!==
b&&null!==this.requests[b]&&this.requests[b].abort();c();this.requests.major=$.ajax({url:"search/majors?query="+a,type:"GET",dataType:"json",contentType:"application/json",success:function(a){d(a,"major")},error:console.log("Major search aborted or failed. "),complete:console.log("Major search initiated. ")});this.requests.minor=$.ajax({url:"search/minors?query="+a,type:"GET",dataType:"json",contentType:"application/json",success:function(a){d(a,"minor")},error:console.log("Minor search aborted or failed. "),
complete:console.log("Minor search initiated. ")});this.requests.spec=$.ajax({url:"search/specs?query="+a,type:"GET",dataType:"json",contentType:"application/json",success:function(a){d(a,"specialisation")},error:console.log("Specialisation search aborted or failed. "),complete:console.log("Specialisation search initiated. ")})};this.addFilter=function(a,c){if(null!==this.getFilter(a,c))return!1;a=new Filter(a,c);this.filters.push(a);return a};this.deleteFilter=function(a,c){a=this.getFilter(a,c);
null!==a&&this.filters.splice(this.filters.indexOf(a),1);return a||!1};this.getFilter=function(a,c){for(var b=$jscomp.makeIterator(this.filters),e=b.next();!e.done;e=b.next())if(e=e.value,e.type===a&&e.data===c)return e;return null}}function Filter(a,b){this.type=a;this.data=b;this.toString=function(){if("session"===a){var b=this.data.slice(0,4),d=this.data.slice(4);return"My "+b+" "+SESSION_WORDS[d]}return this.data}}
var SESSION_WORDS={Su:"Summer Session",S1:"First Semester",Au:"Autumn Session",Wi:"Winter Session",S2:"Second Semester",Sp:"Spring Session"},SESSION_ABBREVS={},abb;for(abb in SESSION_WORDS)SESSION_ABBREVS[SESSION_WORDS[abb]]=abb;
var THIS_YEAR=(new Date).getFullYear().toString(),ELECTIVE_TEXT="Elective Course",MMS_CLASS_NAME="mms-course-list",allMMSCourseCodes={},compulsoryCourseCodes=[],COLOR_CLASSES="compulsory elective mms-course-list0 mms-course-list1 mms-course-list2 mms-course-list3 mms-course-list4 invalid-cell".split(" "),COLOR_CLASSES_STR=COLOR_CLASSES.join(" "),MMS_TYPES_MAPPING={MAJ:"Major",MIN:"Minor",SPEC:"Specialisation",HSPC:"Honours Specialisation"},colorMappings={},legendMappings={compulsory:"Degree Program Courses",
elective:"Elective Courses"},NUM_ADD_SESSIONS_END=5;
function addDegree(a,b){var c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(PLAN.addDegree(a,b),2);(c=e.yieldResult)||console.log("Tried to add degree "+a+" ("+b+"), already present.");d='<a href="https://programsandcourses.anu.edu.au/'+PLAN.degrees[0].year+"/program/"+PLAN.degrees[0].code+'" target="_blank">'+PLAN.degrees[0].title+"</a>";PLAN.degrees[1]&&(d+=' and <a href="https://programsandcourses.anu.edu.au/'+PLAN.degrees[1].year+"/program/"+
PLAN.degrees[1].code+'" target="_blank">'+PLAN.degrees[1].title+"</a>",reorganiseDegreeTracker(!0));d+=" starting "+start_year+" Semester "+start_sem;$("#degree-title-text").html(d);return e.return(c)})}
function clearAllCourses(){PLAN.clearAllCourses();PLAN.clearWarnings();for(var a=$jscomp.makeIterator($("#plan-grid").find(".plan-cell")),b=a.next();!b.done;b=a.next())b=b.value,$(b).popover("dispose"),$(b).find(".course-code").text()!==ELECTIVE_TEXT&&$(b).draggable("destroy"),makeSlotDroppable($(b)),$(b).find(".course-code").text(ELECTIVE_TEXT),$(b).find(".course-title").text(""),$(b).removeClass(COLOR_CLASSES_STR);updateProgress();updateWarningNotices()}
function resetPlan(){SAVER.disableSaving();clearPlanner();setupPlanner(!0)}
function updateColorLegend(){var a=$("#color-coding-section");a.empty();for(var b=["mms-course-list0","mms-course-list1","mms-course-list2","mms-course-list3","mms-course-list4"],c=0;c<COLOR_CLASSES.length;c++){var d=COLOR_CLASSES[c];if(d in legendMappings){var e=$('<div class="color-coding-row"/>'),f=$('<div class="color-coding-box"/>'),g=$('<span class="color-coding-text"/>');console.log(d);console.log(legendMappings);f.css("background-color",colorMappings[d]);d in b?(console.log(legendMappings[d]),
g.text(MMS_TYPES_MAPPING[legendMappings[d].type]+": "+legendMappings[d].title)):g.text(legendMappings[d]);e.append(f);e.append(g);a.append(e)}}}function addLinearGradient(a,b){for(var c=["-webkit-","-moz-","-o-","-ms-"],d=0;d<c.length;d++){for(var e=c[d]+"linear-gradient(135deg",f=100/a.length,g=0;g<a.length;g++){var n=g==a.length-1?100-f:(g+1)*f;0<g&&g<a.length-1&&(e+=","+colorMappings[a[g]]+" "+f*g+"%");e+=","+colorMappings[a[g]]+" "+n+"%"}e+=")";b.css("background",e)}}
function addRepeatingLinearGradient(a,b){for(var c=["-webkit-","-moz-","-o-","-ms-"],d=0;d<c.length;d++){var e=c[d]+"repeating-linear-gradient(135deg";e+=","+colorMappings[a[0]];for(var f=0;f<a.length;f++)0<f&&f<a.length-1&&(e+=","+colorMappings[a[f]]+" "+2*f+"%"),f!==a.length-1&&(e+=","+colorMappings[a[f]]+" "+2*(f+1)+"%");e+=")";b.css("background",e)}}
function addColor(a,b){a.css("background","");!a.hasClass("compulsory")&&compulsoryCourseCodes.includes(b)&&a.addClass("compulsory");var c=0,d;for(d in allMMSCourseCodes){var e=MMS_CLASS_NAME+c;!a.hasClass(e)&&allMMSCourseCodes[d].includes(b)&&a.addClass(e);c++}b=a.attr("class").split(/\s+/).filter(function(a){return COLOR_CLASSES.includes(a)});1<b.length&&addLinearGradient(b,a)}
function makeElective(a,b,c){a.popover("dispose");a.find(".course-code").text(ELECTIVE_TEXT);a.find(".course-title").text("");a.removeClass(COLOR_CLASSES_STR);makeSlotDroppable(a);PLAN.removeWarning("CourseForceAdded",c);PLAN.removeCourse(b,c)}
function removeCourseInPlanner(a){for(var b={},c=$jscomp.makeIterator($("#plan-grid").find(".plan-row")),d=c.next();!d.done;b={session$140:b.session$140},d=c.next()){d=d.value;var e=$(d).find(".first-cell");b.session$140=e.find(".row-ses").text();$(d).children(".plan-cell").each(function(b){return function(){$(this).find(".course-code").text()===a&&makeElective($(this),b.session$140,a)}}(b))}}
function addCourse(a,b,c,d){var e=$("#plan-grid").find(".plan-row").filter(function(){return $(this.children[0]).find(".row-ses").text()===c});removeCourseInPlanner(a);d=$(e.children()[d+1]);d.droppable("destroy");d.find(".course-code").text(a);d.find(".course-title").text(b);d.each(coursePopoverSetup);addColor(d,a);$.when(PLAN.addCourse(c,a).then(function(){updateProgress();updateRecommendations()}))}
function removeCourse(a,b){var c=$("#plan-grid").find(".plan-row").filter(function(){return $(this.children[0]).find(".row-ses").text()===a});c=$(c.children()[b]);var d=c.find(".course-code").text();c.removeClass(COLOR_CLASSES_STR);c.prevAll().hasClass("ui-sortable-placeholder")&&b--;makeElective(c,a,d);updateWarningNotices();updateProgress();updateRecommendations()}function toggleFilter(a,b){SEARCH.getFilter(a,b)?deleteFilter(a,b):addFilter(a,b)}
function deleteFilter(a,b){$("#filter-icons").find(".badge").filter(function(c,d){return $(d).text().slice(0,-1)===SEARCH.getFilter(a,b).toString()}).remove();$($("#show-filters").data("bs.popover").tip).find("#filter-buttons button").filter(function(a,d){return $(d).text()===b}).removeClass("active");SEARCH.deleteFilter(a,b);search(!0)}
function addFilter(a,b){var c=SEARCH.addFilter(a,b);if(c){c=$('<span class="badge badge-primary">'+c+"</span>");var d=$('<a class="filter-delete">\u00d7</a>');d.click(function(){deleteFilter(a,b)});c.append(d);$("#filter-icons").append(c," ");search(!0)}}function colorSearchList(){$("#results-courses").find(".draggable-course").each(function(){var a=$(this).find(".course-code").text();addColor($(this),a)})}
function colorPlannerCards(){for(var a=$jscomp.makeIterator($("#plan-grid").find(".plan-row")),b=a.next();!b.done;b=a.next())$(b.value).children(".plan-cell").each(function(){var a=$(this).find(".course-code").text();addColor($(this),a)})}function getColorClassIndex(a){var b=0,c;for(c in allMMSCourseCodes){if(c===a)break;b++}return b}
function mms_add(a,b){function c(a,b,c,d){d=void 0===d?m:d;var e=$('<div class="mms-internal card"/>');a=$('<div class="card-header btn text-left pl-2" data-toggle="collapse" data-target="#mms-internal-'+k+"-section"+d+'">\n    <span class="requirement-type">'+a+"</span>\n"+b+"</div>");d=$('<div id="mms-internal-'+k+"-section"+d+'" class="collapse show"/>');d.on("hide.bs.collapse",function(){$(this).find(".result-course").popover("hide")});b=$('<div class="list-group list-group-flush"/>');var f={};
c=$jscomp.makeIterator(c);for(var g=c.next();!g.done;f={title_node:f.title_node,year_node:f.year_node,item:f.item,code$141:f.code$141},g=c.next())f.code$141=g.value,f.code$141=f.code$141[0].code,f.title_node=$('<span class="course-title"/>'),f.year_node=$('<span class="course-year"/>'),f.code$141 in h||(h[f.code$141]=[]),h[f.code$141].push(function(a){return function(b){a.title_node.text(b.title);a.year_node.text(b.year);makeCourseDraggable(a.item,a.code$141,b.year)}}(f)),f.item=$('<div class="list-group-item list-group-item-action compulsory draggable-course result-course">    <span class="course-code">'+
f.code$141+"</span> </div>"),f.item.addClass(MMS_CLASS_NAME+t),f.item.append(f.title_node),f.item.append(f.year_node),f.item.each(coursePopoverSetup),b.append(f.item);d.append(b);e.append(a);e.append(d);return e}function d(a,b,c,d){var e=$('<div class="mms-internal card"/>');a=$('<div class="card-header btn text-left pl-2" data-toggle="collapse" data-target="#mms-internal-'+k+"-section"+m+'">\n    <span class="requirement-type">'+a+"</span>\n"+b+"</div>");b=$('<div id="mms-internal-'+k+"-section"+
m+'" class="collapse show"/>');b.on("hide.bs.collapse",function(){$(this).find(".result-course").popover("hide")});var f='<div class="mms-internal-category-description">From ';if(d&&0<d.length)for(var g in d)0<g&&(f+="/ "),f+='<a href="javascript:void(0)" class="level-filter" onclick="addFilter(\'level\',\''+d[g]+"')\">"+d[g]+"</a> ";f+="courses starting with: ";for(var h in c)"string"===typeof c[h]&&(0<h&&(f+=", "),f+='<a href="javascript:void(0)" class="code-filter" onclick="addFilter(\'code\',\''+
c[h]+"')\">"+c[h]+"</a>");f=$(f+"</div>");b.append(f);b.append($('<div class="list-group list-group-flush"/>'));e.append(a);e.append(b);return e}var e=this,f,g,n,k,l,r,p,t,h,m,q,u,w,v,B,E,F,A,D,G,y,x,z,I,J,K,C,O,T,H,P,M,Q,R,N,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==L.nextAddress)return L.yield(getMMSOffering(a,b),2);f=L.yieldResult;PLAN.addMMS(a,b);g=$("#mms-active-list");n=$('<div class="mms card"/>');k=a+"-"+b;l=$('<div class="card-header btn text-left pl-2" data-toggle="collapse" data-target="#mms-active-'+
k+'">\n    <span class="mms-code">'+a+'</span>\n    <span class="mms-year">'+b+'</span>\n    <button class="mms-delete btn btn-danger" onclick="deleteMMS(this)">\u00d7</button>\n    <span class="unit-count mr-2">0/'+f.units+"</span>\n    <strong>"+MMS_TYPE_PRINT[f.type]+"</strong>: "+f.title+"\n</div>");r=$('<div id="mms-active-'+k+'" class="collapse show"></div>');r.on("hide.bs.collapse",function(){$(this).find(".result-course").popover("hide")});p=[];t=getColorClassIndex(a);legendMappings[MMS_CLASS_NAME+
t]={title:f.title,type:f.type};updateColorLegend();h={};m=0;q=[];u={};w=f.rules;v={};for(B in w){v.type=B;if(w.hasOwnProperty(v.type)){"compulsory_courses"===v.type&&(p=p.concat([].concat.apply([],w[v.type].courses.map(function(a){return a.map(function(a){return a.code})})||[])),E=c(v.type,"Compulsory courses",w[v.type]),r.append(E),m++);if("one_from_here"===v.type)for(F=$jscomp.makeIterator(w[v.type]),A=F.next();!A.done;A=F.next())D=A.value,p=p.concat([].concat.apply([],D.courses.map(function(a){return a.map(function(a){return a.code})})||
[])),G=c(v.type,"Pick at least one",D),r.append(G),m++;if("x_from_here"===v.type)for(y={},x=$jscomp.makeIterator(w[v.type]),A=x.next();!A.done;y={name:y.name,title:y.title,original_section_count:y.original_section_count,placeholder:y.placeholder},A=x.next())z=A.value,p=p.concat([].concat.apply([],z.courses.map(function(a){return a.map(function(a){return a.code})})||[])),y.title="Choose at least ","maximum"===z.type&&(y.title="Choose up to "),y.title+=(z.num||z.units)+' units<span class="unit-count mr-2">0/'+
(z.num||z.units)+"</span>\n","string"===typeof z.courses?(y.name=z.courses,y.placeholder=$("<div/>"),r.append(y.placeholder),y.original_section_count=m,m++,y.name in KNOWN_COURSE_LISTS?(I=c(v.type,y.title,KNOWN_COURSE_LISTS[y.name],y.original_section_count),y.placeholder.replaceWith(I)):q.push($.ajax({url:"search/courselists",data:{query:y.name},success:function(a,b){return function(d){var e=d.response.courses;e=e.map(function(a,b,c){return"string"!==typeof a?a[0]:a});KNOWN_COURSE_LISTS[a.name]=e;
d.response.type===a.name&&(d=c(b.type,a.title,e,a.original_section_count),a.placeholder.replaceWith(d))}}(y,v)}))):(J=c(v.type,y.title,z.courses),r.append(J),m++);if("x_from_category"===v.type)for(K=$jscomp.makeIterator(w[v.type]),A=K.next();!A.done;A=K.next())C=A.value,O="Choose at least "+(C.num||C.units)+' units<span class="unit-count mr-2">0/'+(C.num||C.units)+"</span>\n","min_max"===C.type&&(O="Choose between "+C.units.minimum+" and "+C.units.maximum+' units<span class="unit-count mr-2">0/'+
C.units.minimum+"</span>\n"),T=d(v.type,O,C.area,C.level),r.append(T),m++;if("required_m/m/s"===v.type)for(H={},P=$jscomp.makeIterator(w[v.type]),M=P.next();!M.done;H={title_node:H.title_node,code$150:H.code$150,year$151:H.year$151},M=P.next())H.code$150=M.value,H.year$151=THIS_YEAR,Q=H.code$150.split("-").pop(),R=$('<div class="mms-internal deg-plain-text">\n    <span class="mms-code">'+H.code$150+"</span>\n    <strong>Compulsory "+MMS_TYPE_PRINT[Q]+':</strong>\n    <div id="deg-'+k+"-section"+m+
'"></div>    <span class="unit-count mr-1">0/'+MMS_TYPE_UNITS[Q]+"</span></div>"),H.title_node=$("<span/>"),N=H.code$150+"/"+H.year$151,N in u||(u[N]=[]),u[N].push(function(a){return function(b){a.title_node.text(b.title);a.title_node.parent().hasClass("result-mms")&&a.title_node.parent().each(mmsPopoverSetup);q.push(mms_add(a.code$150,a.year$151))}}(H)),R.append(H.title_node),r.append(R),m++}v={type:v.type}}p.concat.apply([],p);0!==p.length&&(allMMSCourseCodes[a]=p);n.append(l);n.append(r);0===g.children().length&&
$("#mms-list-placeholder").addClass("d-none");g.prepend(n);S=$(".collapse-all");"Collapse all"===S.text()?S.click():$.merge($("#degree-tabs-content").children(),$("#degree-reqs-list")).find(".collapse").collapse("hide");$(e).attr("disabled",!0);$(e).text("Already in Plan");$.when.apply($,q).then(function(){batchCourseOfferingActions(h);batchMMSData(u);updateProgress()});colorSearchList();colorPlannerCards();L.jumpToEnd()})}
function deleteMMS(a){var b,c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){b=$(a).parent().find(".mms-code").text();c=$(a).parent().find(".mms-year").text();d=getColorClassIndex(b);delete allMMSCourseCodes[b];e=MMS_CLASS_NAME+d;delete legendMappings[e];updateColorLegend();$("."+e).removeClass(e);PLAN.removeMMS(b,c);$(a).parents(".mms").find(".result-course").popover("dispose");$(a).parents(".mms").remove();0===$("#mms-active-list").children().length&&$("#mms-list-placeholder").removeClass("d-none");
updateProgress();colorSearchList();colorPlannerCards();f.jumpToEnd()})}function closePopover(a){$(a).parents(".popover").popover("hide")}function updateClassColorMapping(a){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){b=document.createElement("div");b.id="dummy";b.className=a;document.body.appendChild(b);colorMappings[a]=$("#dummy").css("backgroundColor");document.body.removeChild(b);c.jumpToEnd()})}
function updateColorMappings(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){COLOR_CLASSES.forEach(function(a){updateClassColorMapping(a)});a.jumpToEnd()})}var CS=new CookieStore;save_code||(console.log("No save code provided, checking cookie. "),save_code=CS.getCode());var PLAN=new Plan(start_year,start_sem),SEARCH=new Search(PLAN),SAVER=new AutoSave(PLAN,save_code);setupPlanner();updateColorMappings();updateColorLegend();$("#rc-button").click(function(){$("#rc-modal").modal()});
$("#save-button").click(function(){$("#save-code").text(save_code);$("#save-modal").modal()});
$("#load-plan-button").click(function(){var a=$("#save-code-box").val().trim();a&&($("#code-wrong").hide(),$.ajax({url:"degree/stored_plans",method:"GET",data:{query:a},dataType:"json",contentType:"application/json",success:function(b){save_code=a;CS.setCode(a);SAVER.code=a;$("#save-modal").modal("hide");$("#save-code-box").val("");clearPlanner();setupPlanner()},error:function(a){"no matching plan found"===a.responseJSON.response&&$("#code-wrong").show()}}))});$("#degree-submit-success").find("button.close").click(function(){$("#degree-submit-success").addClass("d-none")});
$("#load-failed-notice").find("button.close").click(function(){$("#load-failed-notice").addClass("d-none")});$("#confirm-clear-button").click(clearAllCourses);$("#confirm-reset-button").click(resetPlan);$("#add-course").on("keyup",function(){search()});$(".collapse").on("hide.bs.collapse",function(){$(this).find(".result-course").popover("hide")});$("#degree-selector").find("a").click(cycleDegrees);$("#degree-tabs-content").find(".degree-body").sortable();$("#degree-reqs-list").find(".degree-body").sortable({containment:$("body")});
$(".collapse-all").click(function(){"Collapse all"===this.textContent?($(this.parentElement.parentElement).find(".collapse").collapse("hide"),$(this).text("Expand all")):"Expand all"===this.textContent&&($(this.parentElement.parentElement).find(".collapse").collapse("show"),$(this).text("Collapse all"))});$("#results-majors, #results-minors, #results-specs").on("hide.bs.collapse",function(){$(this).find(".result-mms").popover("hide")});
$("#show-filters").popover({trigger:"click",title:'Add Filters <a class="popover-close" onclick="closePopover(this)">\u00d7</a>',placement:"right",html:!0,content:'<form onsubmit="return filterSubmit(this)">\n<div class="form-row" style="padding: 0 5px"><label for="code-input">Filter by code (e.g. MATH): </label></div>\n<div class="form-row" style="padding: 0 5px">\n    <div style="width: 100%; float:left; padding-right: 61px;"><input id="code-input" type="text" maxlength="4" class="form-control"></div>\n    <button type="submit" class="btn btn-primary" style="float: left; margin-left: -56px;">Add</button>\n</div>\n<div class="form-row" style="padding: 0 5px"><label>Filter by level: </label></div>\n<div id="filter-buttons" class="form-row">\n    <div class="col-3"><button type="button" class="btn btn-outline-primary btn-sm">1000</button></div>\n    <div class="col-3"><button type="button" class="btn btn-outline-primary btn-sm">2000</button></div>\n    <div class="col-3"><button type="button" class="btn btn-outline-primary btn-sm">3000</button></div>\n    <div class="col-3"><button type="button" class="btn btn-outline-primary btn-sm">4000</button></div>\n</div>\n<div class="form-row mt-2" style="padding: 0 5px">Filter per semester by clicking any elective course in your plan. </div>\n</form>',
template:'<div class="popover filters-panel" role="tooltip">\n    <div class="arrow"></div>\n    <div class="h3 popover-header"></div>\n    <div class="popover-body"></div>\n    <a href="javascript:void(0)" class="popover-footer btn-outline-secondary text-center" onclick="$(\'#show-filters\').popover(\'hide\')">Close</a>\n</div>'}).on("shown.bs.popover",function(){var a=$(this).data("bs.popover"),b=$(a.tip).find("#filter-buttons button");a={};b=$jscomp.makeIterator(b);for(var c=b.next();!c.done;a=
{b:a.b},c=b.next())a.b=c.value,$(a.b).on("click",function(a){return function(){$(a.b).toggleClass("active");toggleFilter("level",$(a.b).text())}}(a)),SEARCH.getFilter("level",$(a.b).text())&&$(a.b).toggleClass("active")});$("#mms-active-list").sortable({containment:$("body")});$("#left-panel").find('a[data-toggle="tab"]').on("hide.bs.tab",function(){$("#left-panel").find(".result-course").popover("hide");$("#show-filters").popover("hide")});
function cycleDegrees(){var a=2*$(this).hasClass("right")-1,b=$("#degree-tabs"),c=b.find("a.active");a=(c.parent().index()+a+2)%2;b=$(b[0].children[a]).find("a").text();$("#degree-selector .degree-selector-title").text(b);$(c.closest("ul").children()[a]).find("a").tab("show")}function clickCell(){$(this).find(".course-code").text()===ELECTIVE_TEXT&&addFilter("session",$(this).parent().find(".first-cell .row-ses").text())}
function highlightElectives(){for(var a=$jscomp.makeIterator($("#plan-grid").find(".plan-cell")),b=a.next();!b.done;b=a.next())b=b.value,$(b).find(".course-code").text()===ELECTIVE_TEXT&&$(b).addClass("highlight-elective")}function clearElectiveHighlights(){for(var a=$jscomp.makeIterator($("#plan-grid").find(".plan-cell")),b=a.next();!b.done;b=a.next())$(b.value).removeClass("highlight-elective")}
function coursePopoverData(a,b){b=void 0===b?!1:b;var c,d,e,f,g,n,k,l,r,p,t,h,m,q,u,w,v,B,E,F,A,D,G,y,x,z,I,J,K;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){switch(C.nextAddress){case 1:c=$(a).find(".course-code").text();d=$(a).find(".course-year").text();e=a;$(a).parents(".popover-region").find(".result-course, .result-mms").each(function(){this!==e&&$(this).popover("hide")});f=$(a).data("bs.popover");if(f["data-received"])return C.return();g=$(f.tip);return C.yield(getCourseOffering(c,
d),2);case 2:return n=C.yieldResult,k='<div class="h6 result-title mb-1">'+n.title+"</div>\n",[void 0,"nan"].includes(n.extras.description)||(l=n.extras.description.slice(0,350)+"...",l=l.replace(/\n/g,"<br />"),k+='<h6 class="mt-2">Description</h6>\n<div class="result-description">'+l+"</div>\n"),b||(r=n.extras.sessions,[void 0,"nan"].includes(r)||(k=0===r.length?k+'<h6 class="mt-2">Not available in standard sessions</h6>':k+('<h6 class="mt-2">Available in: '+r.reduce(function(a,b){return a+", "+
b})+"</h6>")),[void 0,"nan"].includes(n.extras.prerequisite_text)||(k+='<h6 class="mt-2">Prerequisites and Incompatibility</h6>\n<div class="result-description">'+n.extras.prerequisite_text+"</div>\n")),k+='<h6 class="mt-2">Related Courses</h6>\n',g.find(".popover-body").prepend('<div class="related-courses list-group d-none"/>'),g.find(".popover-body").prepend(k),p=$(a.parentElement.firstElementChild),t=d,t=p.hasClass("first-cell")?t+p.find(".row-ses").text().slice(4):t+"S1",C.setCatchFinallyBlocks(3),
m={},C.yield($.ajax({url:"recommendations/recommend",data:{code:PLAN.degrees[0].code,courses:JSON.stringify([(m[t]=[{code:c}],m)])}}),5);case 5:h=C.yieldResult;C.leaveTryBlock(4);break;case 3:return C.enterCatchBlock(),g.find(".fa-sync-alt").parent().removeClass("d-flex").addClass("d-none"),C.return();case 4:q={};u=g.find(".related-courses");w=[];v=$jscomp.makeIterator(n.rules);for(B=v.next();!B.done;B=v.next())for(E=B.value,F=$jscomp.makeIterator(E),A=F.next();!A.done;A=F.next())D=A.value,/^[A-Z]{4}[0-9]{4}/.test(D)&&
w.push({course:D,reasoning:"This is a prerequisite course."});G=$jscomp.makeIterator(h.response);for(y=G.next();!y.done;y=G.next())x=y.value,w.map(function(a){return a.course}).includes(x.course)||w.push(x);z={};I=$jscomp.makeIterator(w);for(y=I.next();!y.done;z={title_node:z.title_node,year_node:z.year_node,item$155:z.item$155,code$154:z.code$154},y=I.next())J=y.value,z.code$154=J.course,K=J.reasoning,z.item$155=$('<div class="draggable-course result-course list-group-item list-group-item-action">\n    <span class="course-code">'+
z.code$154+"</span>\n</div>\n"),z.year_node=$('<span class="course-year"></span>'),z.title_node=$('<span class="course-title"></span>'),z.code$154 in q||(q[z.code$154]=[]),q[z.code$154].push(function(a){return function(b){a.title_node.text(b.title);a.year_node.text(b.year);makeCourseDraggable(a.item$155,a.code$154,b.year)}}(z)),z.item$155.append(z.title_node),z.item$155.append('<div class="course-reason">'+K+"</div>"),u.append(z.item$155);return C.yield(batchCourseOfferingActions(q),6);case 6:u.removeClass("d-none"),
k+=u[0].outerHTML,g.find(".fa-sync-alt").parent().removeClass("d-flex").addClass("d-none"),f.config.content=k,f["data-received"]=!0,C.jumpToEnd()}})}
function mmsPopoverData(){var a=this,b,c,d,e,f,g,n,k,l,r,p,t;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return b=$(a).find(".mms-code").text(),h.yield(getMMSOffering(b,start_year),2);c=h.yieldResult;d=c.year;$(a).parents(".popover-region").find(".result-course, .result-mms").each(function(){$(this).find(".mms-code").text()!==b&&$(this).popover("hide")});e=$(a).data("bs.popover");f=$(e.tip);g=f.find("button");PLAN.trackingMMS(b,d)?(g.attr("disabled",!0),g.text("Already in Plan")):
(g.attr("disabled",!1),g.text("Add to Plan"));if(e["data-received"])return h.return();n="";c.extras.description&&(k=c.extras.description,l=c.extras.learning_outcomes?350:700,r=k.length>l?k.slice(0,l)+"...":k,r=r.replace(/\n/g,"<br />"),n+='<h6 class="mt-2">Description</h6>\n<div class="result-description">'+r+"</div>\n");c.extras.learning_outcomes&&(p=c.extras.learning_outcomes,t=350<p.length?p.slice(0,350)+"...":p,t=t.replace(/\n/g,"<br />"),n+='<h6 class="mt-2">Learning Outcomes</h6>\n<div class="result-learning-outcomes">'+
t+"</div>\n");e.config.content=n;f.find(".fa-sync-alt").css({display:"none"});f.find(".popover-body").append(n);e["data-received"]=!0;$(".mms-add button").click(mms_click_add);h.jumpToEnd()})}
function search(a){a=void 0===a?!1:a;var b=$("#add-course").val(),c=$("#search-results-list").find(".card-body");c.find(".result-mms").popover("dispose");c.empty();b.trim()&&(SEARCH.courseSearch(b,function(){searchResultsLoading(!0,!0)},updateCourseSearchResults),a||SEARCH.mmsSearch(b,function(){searchResultsLoading(!0,!1)},updateMMSSearchResults))}
function dropOnSlot(a,b){b.draggable.draggable("option","revert",!1);$(this).removeClass("active-drop");var c=a.target.parentElement,d=$(c.firstElementChild),e=b.draggable.find(".course-code").text(),f=b.draggable.find(".course-title").text(),g=d.find(".row-ses").text();d=$(d[0].lastElementChild).text();makePlanCellDraggable($(a.target),e,g.year,!1);var n=$(a.target).index()-1;if($(c).hasClass("unavailable")){c=null;if("Prerequisites not met"===d)$("#prereq-modal-course").text(b.draggable.find(".course-code").text()),
c=$("#prereq-modal");else if(d.includes("Incompatible"))$("#incompat-course1").text(b.draggable.find(".course-code").text()),$("#incompat-course2").text(d.split(" ").pop()),c=$("#incompat-modal");else if("Not available in this semester/ session"===d)$("#unavail-modal-course").text(b.draggable.find(".course-code").text()),c=$("#unavail-modal");else return;b=c.find("#course-add-override");b.off("click");b.click(function(){addCourse(e,f,g,n);PLAN.addWarning("CourseForceAdded",e,[makeScrollAndGlow($(a.target))]);
updateWarningNotices()});c.modal()}else addCourse(e,f,g,n)}function filterSubmit(a){a=$(a).find("input[type=text]");var b=a.val().toUpperCase();b&&/^[A-Z]{4}$/.test(b)&&!SEARCH.getFilter("code",b)?(addFilter("code",b),a.val(""),a.css("background-color",""),a.css("color","")):(a.css("background-color","#f8d7da"),a.css("color","#721c24"),a.keydown(function(){$(this).css("background-color","");$(this).css("color","")}));return!1}
function mms_click_add(){var a=this,b,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return b=$(a).parents(".popover").attr("data-code"),c=THIS_YEAR,e.yield(getMMSOffering(b,c),2);d=e.yieldResult;if(PLAN.trackedMMS.includes(d))return e.return();$("#search-results-list, #degree-reqs-list").find(".result-mms").each(function(){$(this).find(".mms-code").text()===b&&$(this).popover("hide")});mms_add(b,c);e.jumpToEnd()})}
function clearPlanner(){PLAN=new Plan;SAVER.plan=PLAN;SEARCH.plan=PLAN;$("#plan-grid").empty();$("#mms-active-list").find(".mms-delete").click();$.merge($("#degree-tabs-content").children(),$("#degree-reqs-list")).find(".degree-body").empty()}
function setupPlanner(a){a=void 0===a?!1:a;var b,c,d,e,f,g,n,k,l,r,p,t,h,m,q,u,w,v,B,E,F,A,D,G,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:if(!save_code||a)return PLAN.startSem=start_sem,x.yield(addDegree(degree_code,start_year),10);console.log("Loading found save code ("+save_code+").");clearPlanner();x.setCatchFinallyBlocks(4);return x.yield($.ajax({url:"degree/stored_plans",method:"GET",data:{query:save_code},dataType:"json",contentType:"application/json"}),
6);case 6:b=x.yieldResult.response;x.leaveTryBlock(5);break;case 4:return c=x.enterCatchBlock(),"no matching plan found"===c.responseJSON.response&&$("#load-failed-notice").removeClass("d-none"),save_code=void 0,SAVER.code=save_code,x.return(setupPlanner());case 5:return start_year=b.degrees[0].year,start_sem=b.startSem,PLAN.startSem=b.startSem,x.yield(addDegree(b.degrees[0].code,b.degrees[0].year),7);case 7:d=x.yieldResult;degree_code=d.code;degree_name=d.title;e=$("#degree-reqs-list");f=$("#degree-reqs");
e.hide();f.hide();setupDegreeRequirements(e.find(".degree-body"),d);if(!b.degrees[1]){e.show();degree_code2=degree_name2="";x.jumpTo(8);break}f.show();return x.yield(addDegree(b.degrees[1].code,b.degrees[1].year),9);case 9:g=x.yieldResult,degree_code2=g.code,degree_name2=g.title;case 8:n=$jscomp.makeIterator(b.sessions);for(k=n.next();!k.done;k=n.next())l=k.value,PLAN.addSession(l);r=$jscomp.makeIterator(b.trackedMMS);for(p=r.next();!p.done;p=r.next())t=p.value,mms_add(t.code,t.year);setupGrid();
loadCourseGrid(b.courses);h=$jscomp.makeIterator(b.warnings);for(m=h.next();!m.done;m=h.next()){q=m.value;u=[];w={};v=$jscomp.makeIterator(q.actions);for(B=v.next();!B.done;w={action:w.action},B=v.next())w.action=B.value,"scroll-and-glow"===w.action.type&&(E=$(".plan-row").filter(function(a){return function(b,c){return $(c).find(".row-ses").text()===a.action.session}}(w)),F=E.children().filter(function(a){return function(b,c){return $(c).find(".course-code").text()===a.action.code}}(w)),u.push(makeScrollAndGlow($(F))));
PLAN.addWarning(q.type,q.text,u)}updateWarningNotices();x.jumpTo(0);break;case 10:A=x.yieldResult;D=$("#degree-reqs-list");D.hide();setupDegreeRequirements(D.find(".degree-body"),A);if(!degree_code2){D.show();x.jumpTo(11);break}return x.yield(addDegree(degree_code2,start_year),11);case 11:G=PLAN.degrees[0].units;PLAN.degrees[1]&&(G+=PLAN.degrees[1].units);for(y=0;y<G/24;y++)PLAN.addSession(nextSession(start_year+"S"+start_sem,3*y));setupGrid();loadCourseGrid(PLAN.degrees[0].suggestedPlan);updateWarningNotices();
x.jumpToEnd()}})}
function reorganiseDegreeTracker(a){var b=$("#degree-reqs"),c=$("#degree-reqs-list"),d=$("#degree-tabs-content");if(a){c.hide();b.show();c.find(".degree-body").children().appendTo($(d.children()[0]).find(".degree-body"));c=$(d.children()[0]).find(".degree-header .unit-count");c.text(c.text().split("/")[0]+"/"+PLAN.degrees[0].units+" units");setupDegreeRequirements($(d.children()[1]).find(".degree-body"),PLAN.degrees[1]);c=$("#degree-tabs");for(var e in PLAN.degrees)$(c.find("a")[e]).text(PLAN.degrees[e].title);c.find("a").last().tab("show");
$(".degree-selector-title").text(PLAN.degrees[1].title);degree_code2&&$("#degree-selector").find(".nav-arrow.right").click()}else for(b.hide(),c.show(),e=PLAN.degrees[0],d=$jscomp.makeIterator(d.children()),a=d.next();!a.done;a=d.next())a=a.value,b=$(a).find(".deg-identifier").text(),e.code+"-"+e.year===b&&($(a).find(".degree-body").children().appendTo(c.find(".degree-body")),c.find(".degree-header .unit-count").text($(a).find(".degree-header .unit-count").text()),$(a).empty())}
function removeAddRows(a){a.addClass("add-row-wrapper");a.next().hasClass("add-row-wrapper")&&(a=a.next());for(var b=0;3>b&&a.hasClass("add-row-wrapper");b++){var c=a.prev();a.remove();a=c}return a}
function createRemoveSessionBtn(a,b){var c=$('<button class="remove-row-btn"/>').append('<i class="fas fa-sm fa-minus-square"/>'),d=start_year+"S"+start_sem;c.click(function(){$(".session-popover").popover("hide");var c=$(this).parent();c.addClass("remove-row-animate").on("transitionend",function(e){a===PLAN.sessions[PLAN.sessions.length-1]?(removeSession(a,b),e=removeAddRows(c),0===PLAN.sessions.length?$("#plan-grid").append(createAddSessionRow(d,!0)):$("#plan-grid").append(createAddSessionRow(nextSession(e.find(".row-ses").text()),
!0))):(removeSession(a,b),e=removeAddRows(c),0===e.length?$("#plan-grid").prepend(createAddSessionRow(d,!1)):e.after(createAddSessionRow(nextSession(e.find(".row-ses").text()),!1)))})});return c}function removeSession(a,b){$(b).children(".plan-cell").each(function(){var b=$(this).find(".course-code").text();b!==ELECTIVE_TEXT&&(PLAN.removeWarning("CourseForceAdded",b),PLAN.removeCourse(a,b))});updateWarningNotices();updateProgress();updateRecommendations();PLAN.removeSession(a)}
function createEmptySessionRow(a){var b=a.slice(0,4),c=a.slice(4),d=$('<div class="plan-row"/>');d.append('<div class="first-cell"><div class="row-year h4">'+b+'</div><div class="row-sem h5">'+SESSION_WORDS[c]+'</div><div class="row-ses">'+a+"</div></div>");for(a=0;4>a;a++){c=$('<div class="plan-cell result-course" tabindex="5"/>');var e=$('<span class="course-title"/>');c.append('<div class="course-code">'+ELECTIVE_TEXT+"</div>");c.append('<div class="course-year">'+b+"</div>");c.append(e);c.click(clickCell);
c.each(coursePopoverSetup);makeSlotDroppable(c);d.append(c)}return d}function createSessionRowEventListener(a,b){a.click(function(){PLAN.addSession(b);var a=$('<div class="plan-row-wrapper"/>'),d=createEmptySessionRow(b),e=createRemoveSessionBtn(b,d);a.append(e);a.append(d);$(this).parent().addClass("add-row-animate").on("transitionend",function(b){$(b.target).replaceWith(a)})})}
function createAddSessionBtn(){return $('<button class="add-row-btn"/>').append('<i class="fas fa-sm fa-plus-square"/>')}
function createNextSessionsPopover(a,b,c,d){a.popover({trigger:"click",title:'Add Sessions<a class="popover-close" onclick="closePopover(this)">\u00d7</a>',placement:"right",html:!0,content:function(){for(var a="",b=0;b<c.length;b++)a+="<button class='btn session-popover-btn btn-outline-dark'data-toggle='button' aria-pressed='false' value='"+c[b]+"'>"+c[b].slice(0,4)+" "+SESSION_WORDS[c[b].slice(-2)]+"</button>";return a},template:'<div class="popover session-popover" data-container=".popover-body">\n    <div class="arrow"></div>\n    <div class="h2 popover-header"></div>\n    <div class="popover-body session-popover-body"></div>\n    <button class="btn session-popover-submit btn-success">Add</button>'}).on("shown.bs.popover",
function(a){$(".add-row-btn").not(this).popover("hide");$(".session-popover").find(".session-popover-btn");var e={},g=0;for(a=0;a<c.length;a++)e[c[a]]=!1;$(".session-popover-btn").click(function(){var a=$(this).val();e[a]?g--:g++;e[a]=!e[a]});$(".session-popover-submit").click(function(){for(var a=!1,f={},l=c.length-1;0<=l;f={temp:f.temp,rowWrapper:f.rowWrapper},l--)e[c[l]]?(PLAN.addSession(c[l]),a=createEmptySessionRow(c[l]),f.rowWrapper=$('<div class="plan-row-wrapper"/>'),f.rowWrapper.append(createRemoveSessionBtn(c[l],
a)),f.rowWrapper.append(a),d&&l===c.length-1&&(b.after(createAddSessionRow(nextSession(c[l]),d)),d=!1),f.temp=$("<div class='add-row-wrapper'/>"),b.after(f.temp),setTimeout(function(a){return function(){a.temp.addClass("add-row-animate").on("transitionend",function(b){$(b.target).replaceWith(a.rowWrapper)})}}(f),10),a=!0):0<g&&(0===l||e[c[l-1]])&&(b.after(createAddSessionRow(c[l],d)),d=!1);a&&(b.remove(),$(".session-popover").popover("hide"))})})}
function getNextAvailableSessions(a,b){var c=[];if(b)for(b=0;b<NUM_ADD_SESSIONS_END;b++)c.push(a),a=nextSession(a);else for(;!PLAN.sessions.includes(a);)c.push(a),a=nextSession(a);return c}function createAddSessionRow(a,b){var c=$('<div class="add-row-wrapper"/>'),d=createAddSessionBtn(),e=getNextAvailableSessions(a,b);1<e.length||b?createNextSessionsPopover(d,c,e,b):createSessionRowEventListener(d,a);c.append(d);return c}
function setupGrid(){var a=$("#plan-grid"),b=start_year+"S"+start_sem;0===PLAN.sessions.length?a.append(createAddSessionRow(b,!0)):PLAN.sessions[0]!==start_year+"S"+start_sem&&a.append(createAddSessionRow(b,!1));for(b=0;b<PLAN.sessions.length;b++){var c=PLAN.sessions[b].slice(0,4),d=PLAN.sessions[b].slice(4),e=$('<div class="plan-row"/>');e.append('<div class="first-cell"><div class="row-year h4">'+c+'</div><div class="row-sem h5">'+SESSION_WORDS[d]+'</div><div class="row-ses">'+PLAN.sessions[b]+
"</div></div>");for(d=0;4>d;d++){var f=$('<div class="plan-cell result-course" tabindex="5"/>');f.append('<div class="course-code">'+ELECTIVE_TEXT+"</div>");f.append('<div class="course-year">'+c+"</div>");f.append('<div class="course-title" />');f.click(clickCell);makeSlotDroppable(f);e.append(f)}a.append(e);c=$('<div class="plan-row-wrapper"/>');c.append(createRemoveSessionBtn(PLAN.sessions[b],e));c.append(e);a.append(c);b===PLAN.sessions.length-1?a.append(createAddSessionRow(nextSession(PLAN.sessions[b]),
!0)):nextSession(PLAN.sessions[b])!==PLAN.sessions[b+1]&&a.append(createAddSessionRow(nextSession(PLAN.sessions[b]),!1))}}
function loadCourseGrid(a){for(var b=$("#plan-grid").find(".plan-row"),c={},d={},e=$jscomp.makeIterator(PLAN.sessions),f=e.next();!f.done;d={session$160:d.session$160},f=e.next()){d.session$160=f.value;f=b.filter(function(a){return function(b,c){return $(c).find(".row-ses").text()===a.session$160}}(d));for(var g=d.session$160.slice(0,4),n=a[d.session$160]||[],k={},l=0;l<n.length;k={cell:k.cell,code:k.code},l++)k.code=n[l].code,/^[A-Z]{4}[0-9]{4}$/.test(k.code)&&(k.cell=$(f.children()[l+1]),k.cell.find(".course-code").text(k.code),
compulsoryCourseCodes.includes(k.code)&&k.cell.addClass("compulsory"),k.code+"-"+g in c||(c[k.code+"-"+g]=[]),c[k.code+"-"+g].push(function(a,b){return function(c){a.cell.find(".course-title").text(c.title);PLAN.addCourse(b.session$160,a.code);makePlanCellDraggable(a.cell,a.code,b.session$160.year,!1)}}(k,d)),k.cell.each(coursePopoverSetup),k.cell.droppable("destroy"),makePlanCellDraggable(k.cell,null,null,!0))}batchCourseOfferingActions(c).then(function(){window.setTimeout(function(){updateProgress()},
750);updateRecommendations();SAVER.enableSaving()})}function forcePopoverReposition(){window.scrollBy(0,1);window.scrollBy(0,-1)}
function coursePopoverSetup(a,b){function c(a){var b,c,f,g,p,t,h,m,q,u,w,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(getCourseOffering(d,e),2);b=k.yieldResult;c=!1;f=$jscomp.makeIterator(PLAN.sessions);for(g=f.next();!g.done;g=f.next())p=g.value,c=c||b.checkRequirements(PLAN,p).sat;t=$(a.tip).find(".result-course");t.each(coursePopoverSetup);h=$jscomp.makeIterator(t);for(m=h.next();!m.done;m=h.next())q=m.value,u=$(q).find(".course-code").text(),
PLAN.getCourses(u).length?$(q).remove():(w=$(q).find(".course-year").text(),v=$(q).find(".course-reason").text(),"This is a prerequisite course."===v&&c&&$(q).remove(),makeCourseDraggable($(q),u,w));k.jumpToEnd()})}var d=$(this).find(".course-code").text(),e=$(this).find(".course-year").text();a=2>=$(this).index()?"right":"left";if(d!==ELECTIVE_TEXT){$(this).popover({trigger:"click",title:d+'<a class="popover-close" onclick="closePopover(this)">\u00d7</a>',placement:a,html:!0,content:'<div class="d-flex">\n    <div class="fa fa-sync-alt fa-spin mx-auto my-auto py-2" style="font-size: 2rem;"></div>\n</div>',
template:'<div class="popover course-popover" role="tooltip">\n    <div class="arrow"></div>\n    <div class="h3 popover-header"></div>\n    <div class="popover-body"></div>\n    <a href="https://programsandcourses.anu.edu.au/course/'+d+'     " class="h6 popover-footer mb-0 text-center d-block" target="_blank">See More on Programs and Courses</a>\n</div>'});$(this).on("show.bs.popover",function(){var a=$(this).data("bs.popover");coursePopoverData(this,$(b).hasClass("plan-cell")).then(function(){c(a)})});
var f=!0;$(this).on("click",function(a){f&&(f=!1,forcePopoverReposition())});$(this).on("shown.bs.popover",function(){var a=$(this).data("bs.popover");a["data-received"]&&c(a)})}}
function mmsPopoverSetup(){var a=$(this).find(".mms-name").text(),b=$(this).find(".mms-code").text();$(this).popover({trigger:"click",title:'<a class="popover-close" onclick="closePopover(this)">\u00d7</a>'+a,placement:"left",html:!0,content:'<div class="d-flex">\n    <div class="fa fa-sync-alt fa-spin mx-auto my-auto py-2" style="font-size: 2rem;"></div>\n</div>',template:'<div class="popover mms-popover" role="tooltip" data-code="'+b+'">\n    <div class="arrow"></div>\n    <div class="h3 popover-header"></div>\n    <div class="mms-add"><button class="btn btn-info btn-sm btn-mms-add">Add to Plan</button></div>\n    <div class="popover-body"></div>\n    <a href="https://programsandcourses.anu.edu.au/'+
MMS_TYPE_PRINT[b.split("-")[1]].toLowerCase()+"/"+b+'     " class="h6 popover-footer text-center d-block" target="_blank">See More on Programs and Courses</a>\n</div>'});$(this).on("show.bs.popover",mmsPopoverData);var c=!0;$(this).on("click",function(a){c&&(c=!1,forcePopoverReposition())})}
function updateCourseSearchResults(a){var b=$("#results-courses"),c=$(b.find(".card-body"));if(0<a.length){a=$jscomp.makeIterator(a.slice(0,10));for(var d=a.next();!d.done;d=a.next()){var e=d.value;d=e.course_code;var f=closestYear(THIS_YEAR,Object.keys(e.versions));e=$('<div class="draggable-course result-course list-group-item list-group-item-action">\n    <span class="course-code">'+d+'</span>\n    <span class="course-title">'+e.versions[f].title+"</span>\n</div>");addColor(e,d);makeCourseDraggable(e,
d,f);e.each(coursePopoverSetup);c.append(e)}}else c.append('<div class="m-2">No courses found.</div>');searchResultsLoading(!1,!0);b.collapse("show");console.log("Course search successful")}
function updateMMSSearchResults(a,b){var c=$({major:"#results-majors",minor:"#results-minors",specialisation:"#results-specs"}[b]),d=c.find(".card-body");a=a.responses;if(0<a.length){a=$jscomp.makeIterator(a);for(var e=a.next();!e.done;e=a.next()){e=e.value;var f=e.code,g=void 0,n;for(n in e.versions)if(g=e.versions[n].title,n==THIS_YEAR)break;e=$('<div class="draggable-course result-mms list-group-item list-group-item-action">\n    <span class="mms-code">'+f+'</span><span class="mms-name">'+g+"</span>\n</div>");
e.each(mmsPopoverSetup);d.append(e)}}else d.append('<div class="m-2">No '+b+"s found.</div>");searchResultsLoading(!1,!1);c.collapse("show");console.log(b+" search successful")}
function updateWarningNotices(){var a=$("#courses-forced-notice"),b=$("#courses-forced-list");0<PLAN.warnings.length?a.css({display:"block"}):a.css({display:""});b.empty();a=0;for(var c={},d=$jscomp.makeIterator(PLAN.warnings),e=d.next();!e.done;c={warning:c.warning},e=d.next())c.warning=e.value,0!==a&&b.append(", "),"CourseForceAdded"===c.warning.type&&(e=$('<a class="course-highlighter" href="javascript:void(0)">'+c.warning.text+"</a>"),e.click(function(a){return function(){a.warning.runActions()}}(c)),
b.append(e)),a++}function makeSlotDroppable(a){a.droppable({accept:".draggable-course",drop:dropOnSlot,over:function(b,c){a.addClass("active-drop")},out:function(b,c){a.removeClass("active-drop")}})}
function makePlanCellDraggable(a,b,c,d){a.addClass("draggable-course");a.draggable({zIndex:800,revert:!0,helper:"clone",containment:"document",start:function(a,f){f.helper.addClass("dragged-course");$(this).draggable("instance").offset.click={left:Math.floor(f.helper.width()/2),top:Math.floor(f.helper.height()/2)};$(this).draggable("instance").containment=[0,0,$(window).width()-160,$("footer").offset().top-100];a=$(a.target.parentElement).find(".first-cell");d||(highlightInvalidSessions(getCourseOffering(b,
c),f,a),highlightElectives())},stop:function(a,b){b=$(a.target.parentElement).find(".first-cell");$(a.toElement).one("click",function(a){a.stopImmediatePropagation()});removeSessionHighlights();clearElectiveHighlights();updateWarningNotices();b.hasClass("delete")&&(b.droppable("destroy"),b.find(".course-delete").remove(),b.removeClass("delete").removeClass("alert-danger"),b.children().css({display:""}))}})}
function makeCourseDraggable(a,b,c){a.draggable({zIndex:800,revert:!0,helper:"clone",start:function(a,e){e.helper.addClass("dragged-course");$(this).draggable("instance").offset.click={left:Math.floor(e.helper.width()/2),top:Math.floor(e.helper.height()/2)};highlightInvalidSessions(getCourseOffering(b,c),e,null);highlightElectives()},stop:function(b,c){$(b.toElement).one("click",function(a){a.stopImmediatePropagation()});removeSessionHighlights();clearElectiveHighlights();a.draggable("option","revert",
!0)}})}function addRowCellsClass(a,b){$(a).children(".plan-cell").each(function(){$(this).addClass(b)})}function removeRowCellsClass(a,b){$(a).children(".plan-cell").each(function(){$(this).removeClass(b)})}
function highlightInvalidSessions(a,b,c){var d,e,f,g,n,k,l,r,p,t,h,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(a,2);a=u.yieldResult;d={};e=a.extras.sessions;f=$jscomp.makeIterator(PLAN.sessions);for(g=f.next();!g.done;g=f.next())n=g.value,k=a.checkRequirements(PLAN,n),l=e.includes(SESSION_WORDS[n.slice(4)]),k.sat||(d[n]=k.inc.length?"Incompatible courses: "+k.inc:"Prerequisites not met"),l||(d[n]="Not available in this semester/ session");
r=$jscomp.makeIterator($("#plan-grid").find(".plan-row"));for(p=r.next();!p.done;p=r.next())t=p.value,h=$(t.children[0]),m=h.find(".row-ses").text(),m in d&&(q=d[m],$(t).addClass("unavailable",{duration:500}),h.addClass("d-flex"),h.children().css({display:"none"}),h.append('<div class="h6 mx-auto my-auto">'+q+"</div>"),addRowCellsClass(t,"invalid-cell"));null!==c&&(c.children().css({display:"none"}),c.addClass("delete").addClass("alert-danger"),c.append('<div class="course-delete mx-auto my-auto text-center" style="font-weight: bold;">\n    <i class="fas fa-trash-alt" aria-hidden="true" style="font-size: 32pt;"></i>\n    <div class="mt-2">Remove</div>\n</div>'),
c.droppable({accept:".plan-cell",drop:function(a,d){d.draggable.draggable("option","revert",!1);a=c.find(".row-ses").text();d=d.draggable.index();removeCourse(a,d);$(b.helper.prevObject).draggable("destroy");c.droppable("destroy");c.find(".course-delete").remove();c.removeClass("delete").removeClass("alert-danger");c.children().css({display:""})}}));u.jumpToEnd()})}
function removeSessionHighlights(){for(var a=$jscomp.makeIterator($("#plan-grid").find(".plan-row")),b=a.next();!b.done;b=a.next())if(b=b.value,$(b).hasClass("unavailable")){var c=$(b.children[0]);$(b).removeClass("unavailable",{duration:500});c.removeClass("d-flex");for(c.children().css({display:""});3<c.children().length;)c.children().last().remove();removeRowCellsClass(b,"invalid-cell")}}
function setupDegreeRequirements(a,b){function c(a,b,c,d){d=void 0===d?p:d;var e=$('<div class="deg card"/>');a=$('<div class="card-header btn text-left pl-2" data-toggle="collapse" data-target="#deg-'+f+"-section"+d+'">\n    <span class="requirement-type">'+a+"</span>\n"+b+"</div>");d=$('<div id="deg-'+f+"-section"+d+'" class="collapse show"/>');d.on("hide.bs.collapse",function(){$(this).find(".result-course").popover("hide")});b=$('<div class="list-group list-group-flush"/>');var g={};c=$jscomp.makeIterator(c);
for(var h=c.next();!h.done;g={title_node:g.title_node,year_node:g.year_node,item:g.item,code:g.code},h=c.next())g.code=h.value,g.title_node=$('<span class="course-title"/>'),g.year_node=$('<span class="course-year"/>'),g.code in n||(n[g.code]=[]),n[g.code].push(function(a){return function(b){a.title_node.text(b.title);a.year_node.text(b.year);makeCourseDraggable(a.item,a.code,b.year)}}(g)),g.item=$('<div class="list-group-item list-group-item-action compulsory draggable-course result-course">    <span class="course-code">'+
g.code+"</span> </div>"),compulsoryCourseCodes.push(g.code),g.item.append(g.title_node),g.item.append(g.year_node),g.item.each(coursePopoverSetup),b.append(g.item);d.append(b);e.append(a);e.append(d);return e}function d(a,b,c,d){var e=$('<div class="deg card"/>');a=$('<div class="card-header btn text-left pl-2" data-toggle="collapse" data-target="#deg-'+f+"-section"+p+'">\n    <span class="requirement-type">'+a+"</span>\n"+b+"</div>");b=$('<div id="deg-'+f+"-section"+p+'" class="collapse show"/>');
b.on("hide.bs.collapse",function(){$(this).find(".result-course").popover("hide")});var g='<div class="deg-category-description">From ';if(d&&0<d.length)for(var h in d)0<h&&(g+="/ "),g+='<a href="javascript:void(0)" class="level-filter" onclick="addFilter(\'level\',\''+d[h]+"')\">"+d[h]+"</a> ";g+="courses starting with: ";for(var k in c)"string"===typeof c[k]&&(0<k&&(g+=", "),g+='<a href="javascript:void(0)" class="code-filter" onclick="addFilter(\'code\',\''+c[k]+"')\">"+c[k]+"</a>");g=$(g+"</div>");
b.append(g);b.append($('<div class="list-group list-group-flush"/>'));e.append(a);e.append(b);return e}function e(a,b,c){var d=$('<div class="deg card"/>');a=$('<div class="card-header btn text-left pl-2" data-toggle="collapse" data-target="#deg-'+f+"-section"+p+'">\n    <span class="requirement-type">'+a+"</span>\n"+b+"</div>");b=$('<div id="deg-'+f+"-section"+p+'" class="collapse show"/>');b.on("hide.bs.collapse",function(){$(this).find(".result-mms").popover("hide")});var e=$('<div class="list-group list-group-flush"/>'),
g={};c=$jscomp.makeIterator(c);for(var h=c.next();!h.done;g={title_node:g.title_node},h=c.next()){h=h.value;var k=start_year;g.title_node=$('<span class="mms-name"/>');k=h+"/"+k;k in l||(l[k]=[]);l[k].push(function(a){return function(b){a.title_node.text(b.title);a.title_node.parent().hasClass("result-mms")&&a.title_node.parent().each(mmsPopoverSetup)}}(g));h=$('<div class="list-group-item list-group-item-action result-mms">    <span class="mms-code">'+h+"</span> </div>");h.append(g.title_node);e.append(h)}b.append(e);
d.append(a);d.append(b);return d}var f=b.identifier,g=b.rules;a.parent().find(".degree-header").find(".unit-count").text("0/"+b.units+" units");var n={},k=[],l={},r=[],p=0;a.append('<div class="deg-identifier">'+b.code+"-"+b.year+"</div>");b={};for(var t in g){b.type=t;if(g.hasOwnProperty(b.type)){if("compulsory_courses"===b.type){var h=c(b.type,"Compulsory courses",g[b.type]);a.append(h);p++}if("one_from_here"===b.type){var m=$jscomp.makeIterator(g[b.type]);for(h=m.next();!h.done;h=m.next())h=c(b.type,
"Pick at least one",h.value),a.append(h),p++}if("x_from_here"===b.type){m={};var q=$jscomp.makeIterator(g[b.type]);for(h=q.next();!h.done;m={name:m.name,title:m.title,original_section_count:m.original_section_count,placeholder:m.placeholder},h=q.next())h=h.value,m.title="Choose at least "+(h.num||h.units)+' units<span class="unit-count mr-2">0/'+(h.num||h.units)+"</span>\n","string"===typeof h.courses?(m.name=h.courses,m.placeholder=$("<div/>"),a.append(m.placeholder),m.original_section_count=p,p++,
m.name in KNOWN_COURSE_LISTS?(h=c(b.type,m.title,KNOWN_COURSE_LISTS[m.name],m.original_section_count),m.placeholder.replaceWith(h)):k.push($.ajax({url:"search/courselists",data:{query:m.name},success:function(a,b){return function(d){var e=d.response.courses;e=e.map(function(a,b,c){return"string"!==typeof a?a[0]:a});KNOWN_COURSE_LISTS[a.name]=e;d.response.type===a.name&&(d=c(b.type,a.title,e,a.original_section_count),a.placeholder.replaceWith(d))}}(m,b)}))):(h=c(b.type,m.title,h.courses),a.append(h),
p++)}if("x_from_category"===b.type)for(m=$jscomp.makeIterator(g[b.type]),h=m.next();!h.done;h=m.next())h=h.value,q="Choose at least "+(h.num||h.units)+' units<span class="unit-count mr-2">0/'+(h.num||h.units)+"</span>\n","min_max"===h.type&&(q="Choose between "+h.units.minimum+" and "+h.units.maximum+' units<span class="unit-count mr-2">0/'+h.units.minimum+"</span>\n"),h=d(b.type,q,h.area,h.level),a.append(h),p++;if("required_m/m/s"===b.type)for(h={},m=$jscomp.makeIterator(g[b.type]),q=m.next();!q.done;h=
{title_node:h.title_node,code:h.code,year:h.year},q=m.next()){h.code=q.value;h.year=start_year;q=h.code.split("-").pop();q=$('<div class="deg deg-plain-text">\n    <span class="mms-code">'+h.code+"</span>\n    <strong>Compulsory "+MMS_TYPE_PRINT[q]+':</strong>\n    <div id="deg-'+f+"-section"+p+'"></div>    <span class="unit-count mr-1">0/'+MMS_TYPE_UNITS[q]+"</span></div>");h.title_node=$("<span/>");var u=h.code+"/"+h.year;u in l||(l[u]=[]);l[u].push(function(a){return function(b){a.title_node.text(b.title);
a.title_node.parent().hasClass("result-mms")&&a.title_node.parent().each(mmsPopoverSetup);r.includes(a.code)&&k.push(mms_add(a.code,a.year));$("#mms-active-list").find(".mms-code").each(function(){$(this).text()===a.code&&$(this).parent().find(".mms-delete").remove()})}}(h));r.push(h.code);q.append(h.title_node);a.append(q);p++}if("one_from_m/m/s"===b.type)for(m=$jscomp.makeIterator(g[b.type]),h=m.next();!h.done;h=m.next())h=e(b.type,"Complete one of these majors, minors, or specialisations",h.value),
a.append(h),p++;if("max_by_level"===b.type)for(m=$jscomp.makeIterator(g[b.type]),h=m.next();!h.done;h=m.next())h=h.value,"maximum"===h.type&&(q=h.units,h=$('<div class="deg deg-plain-text">\n    <div id="deg-'+f+"-section"+p+'"></div>\n    <span class="unit-count mr-1">0/'+q+"</span>    At most "+q+" units of "+h.level+"-level courses\n</div>"),a.append(h),p++)}b={type:b.type}}$.when.apply($,k).then(function(){batchCourseOfferingActions(n);batchMMSData(l);updateProgress()})}
function updateMMSTrackers(){for(var a=$jscomp.makeIterator(PLAN.trackedMMS),b=a.next();!b.done;b=a.next()){b=b.value;var c=$("#mms-active-list").find("#mms-active-"+b.identifier).parent(),d=b.checkRequirements(PLAN),e={},f;for(f in d.rule_details){var g=d.rule_details[f],n=g.type,k=c.find("#mms-internal-"+b.identifier+"-section"+f).parent(),l="";if(["compulsory_courses","one_from_here","x_from_here"].includes(n)){l=$jscomp.makeIterator(k.find(".result-course"));for(var r=l.next();!r.done;r=l.next()){r=
r.value;var p=$(r).find(".course-code").text();setChecked($(r),g.codes.includes(p),"compulsory_courses"===n)}l=g.sat?"done":"incomplete"}else if(["x_from_category","max_by_level"].includes(n)){e.group=k.find(".list-group");e.group.empty();l={};r=$jscomp.makeIterator(g.codes);for(p=r.next();!p.done;l={code$181:l.code$181},p=r.next())l.code$181=p.value,getCourseOffering(l.code$181,THIS_YEAR).then(function(a,b){return function(c){c=$('<div class="list-group-item list-group-item-action result-course inc">    <span class="course-code">'+
a.code$181+'</span>     <span class="course-year">'+c.year+'</span>     <span class="course-title">'+c.title+"</span></div>");c.each(coursePopoverSetup);b.group.append(c)}}(l,e));l=g.sat?"done":"max_by_level"===n?"problem":"incomplete"}else if(["required_m/m/s","one_from_m/m/s"].includes(n)){n=$jscomp.makeIterator(k.find(".mms-code"));for(l=n.next();!l.done;l=n.next())l=l.value,r=$(l).text(),g.completed.includes(r)?$(l).parent().addClass("inc").removeClass("partial"):g.codes.includes(r)?$(l).parent().addClass("partial").removeClass("inc"):
$(l).parent().removeClass("inc partial");l=g.sat?"done":g.codes.length?"incomplete":"problem"}void 0!==g.units&&updateUnitCount(k.find(".unit-count"),g.units);setPanelStatus(k,l);e={group:e.group}}updateUnitCount($(c[0].firstElementChild).find(".unit-count"),d.units);setPanelStatus(c,d.sat?"done":"incomplete")}}
function updateDegreeTrackers(){var a,b,c,d,e,f,g,n,k,l,r,p,t,h,m,q,u,w,v,B,E,F,A,D,G,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:a=$.merge($("#degree-tabs-content").children(),$("#degree-reqs-list")),b=!0,c=0;case 2:if(!(c<a.length)){x.jumpTo(4);break}d=$(a[c]);e=d.find(".deg-identifier").text();if(void 0===PLAN.degrees[c%2]){x.jumpTo(3);break}f=PLAN.degrees[c%2].checkRequirements(PLAN);n=x.forIn(f.rule_details);case 5:if(null==(g=n.getNext())){x.jumpTo(7);
break}k=f.rule_details[g];l=k.type;r=d.find("#deg-"+e+"-section"+g).parent();p="";if(["compulsory_courses","one_from_here","x_from_here"].includes(l)){t=$jscomp.makeIterator(r.find(".result-course"));for(h=t.next();!h.done;h=t.next())m=h.value,q=$(m).find(".course-code").text(),setChecked($(m),k.codes.includes(q),"compulsory_courses"===l);p=k.sat?"done":"incomplete";x.jumpTo(8);break}if(!["x_from_category","max_by_level"].includes(l)){if(["required_m/m/s","one_from_m/m/s"].includes(l)){u=$jscomp.makeIterator(r.find(".mms-code"));
for(w=u.next();!w.done;w=u.next())v=w.value,B=$(v).text(),k.completed.includes(B)?$(v).parent().addClass("inc").removeClass("partial"):k.codes.includes(B)?$(v).parent().addClass("partial").removeClass("inc"):$(v).parent().removeClass("inc partial");p=k.sat?"done":k.codes.length?"incomplete":"problem"}x.jumpTo(8);break}E=r.find(".list-group");E.empty();F=$jscomp.makeIterator(k.codes);A=F.next();case 10:if(A.done){x.jumpTo(12);break}D=A.value;return x.yield(getCourseOffering(D,THIS_YEAR),13);case 13:G=
x.yieldResult;y=$('<div class="list-group-item list-group-item-action result-course inc">    <span class="course-code">'+D+'</span>     <span class="course-year">'+G.year+'</span>     <span class="course-title">'+G.title+"</span></div>");y.each(coursePopoverSetup);E.append(y);A=F.next();x.jumpTo(10);break;case 12:p=k.sat?"done":"max_by_level"===l?"problem":"incomplete";case 8:void 0!==k.units&&updateUnitCount(r.find(".unit-count"),k.units);setPanelStatus(r,p);x.jumpTo(5);break;case 7:updateUnitCount(d.find(".degree-header .unit-count"),
f.units),b=b&&f.sat;case 3:c++;x.jumpTo(2);break;case 4:$("#degree-completed-notice").css({display:b?"block":""}),x.jumpToEnd()}})}function updateUnitCount(a,b){a.text(b+"/"+a.text().split("/")[1])}function setChecked(a,b,c){b?(a.addClass("inc"),c&&a.removeClass("exc")):(a.removeClass("inc"),c&&a.addClass("exc"))}
function setPanelStatus(a,b){a.removeClass("alert-success alert-warning alert-danger");"done"===b?a.addClass("alert-success"):"incomplete"===b?a.addClass("alert-warning"):"problem"===b&&a.addClass("alert-danger")}function updateProgress(){updateMMSTrackers();updateDegreeTrackers()}
function updateRecommendations(){var a,b,c,d,e,f,g,n,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return a=$("#degree-recommendations-list"),b={},l.setCatchFinallyBlocks(2),l.yield($.ajax({url:"recommendations/recommend",data:{code:PLAN.degrees[0].code,courses:JSON.stringify(preparePlanForUpload(PLAN))},success:function(a){b=a}}),4);case 4:l.leaveTryBlock(3);break;case 2:return c=l.enterCatchBlock(),"Internal Server Error"===c.statusText&&a.text("No recommendations could be made."),
l.return();case 3:d={};a.find(".result-course").popover("dispose");a.empty();e={};f=$jscomp.makeIterator(b.response);for(g=f.next();!g.done;e={title_node:e.title_node,year_node:e.year_node,item:e.item,code:e.code},g=f.next())n=g.value,e.code=n.course,k=n.reasoning,e.item=$('<div class="draggable-course result-course list-group-item list-group-item-action">\n    <span class="course-code">'+e.code+"</span>\n</div>\n"),e.title_node=$('<span class="course-title"></span>'),e.year_node=$('<span class="course-year"></span>'),
e.code in d||(d[e.code]=[]),d[e.code].push(function(a){return function(b){a.title_node.text(b.title);a.year_node.text(b.year);makeCourseDraggable(a.item,a.code,b.year)}}(e)),e.item.append(e.title_node),e.item.append(e.year_node),e.item.append('<div class="course-reason">'+k+"</div>"),e.item.each(coursePopoverSetup),a.append(e.item),addColor(e.item,e.code);return l.yield(batchCourseOfferingActions(d),0)}})}
function searchResultsLoading(a,b){var c=$("#search-results-list").children(),d=c.first();c=c.not(":first");var e={true:"none",false:""},f={true:"inline-block",false:"none"};b?(d.find(".collapse").css({display:e[a]}),d.find(".fa-sync-alt").css({display:f[a]})):(c.find(".collapse").css({display:e[a]}),c.find(".fa-sync-alt").css({display:f[a]}))}
function makeScrollAndGlow(a){var b=function(){$([document.documentElement,document.body]).animate({scrollTop:a.offset().top-3*$(window).height()/10},500);a.animate({boxShadow:"0 0 25px #007bff"});a.animate({boxShadow:"0 0 0px #007bff"})};b.target=a;return b};
